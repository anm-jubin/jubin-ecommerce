<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ACCENDRO</title>
<link rel="icon" href="https://i.postimg.cc/3NH9jtmQ/growth-20231115095146.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
  
  
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    
    //Add CSS for page navigation
    /* Page navigation styles */
    .page {
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .page.active {
      display: block;
      opacity: 1;
    }
    
    /* Floating cart button */
    /* Floating cart button Pulse movement */
    @keyframes cartPulse {

      0%,
      80%,
      100% {
        transform: translateY(0) scale(1);
      }
      
      85% {
        transform: translateY(-2px) scale(1.02);
      }
      
      90% {
        transform: translateY(0) scale(1);
      }
    }
    
    .floating-cart {
      position: fixed;
      bottom: 120px;
      right: 20px;
      background-color: #111111;
      color: white;
      padding: 10px 15px;
      border-radius: 30px;
      border-style: solid;
      border-color: white;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
      animation: cartPulse 3s infinite ease-in-out;
    }
    
    
    
    .floating-cart:hover {
      transform: scale(1.05);
    }
    
    .cart-count {
      position: absolute;
      top: -10px;
      right: -10px;
      background-color: white;
      color: black;
      border-radius: 50%;
      border-style: solid;
      border-color: #777777;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    
    .cart-icon {
      font-size: 20px;
    }
    
    
    
    /* Product buttons */
    .product-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 15px;
    }
    
    
    
    
    
    
    
    /* Cart notification */
    #cart-notification {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #222222;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      border-style: solid;
      border-color: #f9f9f9f9;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 1001;
      transition: opacity 0.5s;
      opacity: 0;
    }
    
    /* Page titles */
    .page h2 {
      margin-top: 0;
      margin-bottom: 20px;
      color: #333;
      border-bottom: 2px solid #4CAF50;
      padding-bottom: 10px;
    }
    

    
    
    
    
    
    // Add this to the navStyles.innerHTML in the initializeApp function
    .buttons-row {
      display: flex;
      justify-content: space-between;
      width: 100%;
    }
    
    
    .product-buttons {
      display: block;
      margin-top: 10px;
      width: 100%;
    }
  </style>
  
  <style>
    /* Main product container styling */
    .product-container {
      display: flex;
      align-items: flex-start;
      gap: 2px;
      padding: 8px;
      /* Reduced padding from 10px */
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 15px;
      /* Reduced from 20px */
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
      /* Setting max-height to make product card shorter */
      max-height: 450px;
    }
    
    .product-container:hover {
      transform: translateY(-3px);
      /* Reduced from -5px */
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
    }
    
    /* Products grid layout */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      /* Desktop layout */
      gap: 15px;
      /* Reduced gap from 20px */
      margin-bottom: 15px;
    }
    
    /* Mobile layout - This is the key change for two products per row */
    @media (max-width: 768px) {
      .products-grid {
        grid-template-columns: repeat(2, 1fr);
        /* Forces two columns on all mobile screens */
        gap: 10px;
        /* Smaller gap on mobile */
      }
      
      /* More compact layout for small screens */
      .product-container {
        padding: 5px;
        margin-bottom: 10px;
      }
      
      /* Making product details more compact */
      .product-name {
        font-size: 14px;
        /* Smaller font */
        margin-top: 5px;
        margin-bottom: 5px;
      }
      
      .product-price {
        margin-bottom: 5px;
        /* Reduced from 10px */
      }
      
      .original-price,
      .discounted-price {
        font-size: 14px;
        /* Smaller font */
      }
      
      /* Make images smaller on mobile */
      .product-image {
        flex-basis: 120px;
        /* Smaller base size */
      }
    }
    
    
    
    /* Checkbox container styling */
    .checkbox-container {
      display: none;
    }
    
    
    
    
    /* Product image styling - made more compact */
    .product-image {
      flex-basis: 140px;
      /* Reduced from 150px */
      flex-shrink: 0;
    }
    
    .product-image img {
      width: 100%;
      height: auto;
    }
    
    /* Product details styling - more compact */
    .product-details {
      flex-grow: 1;
      padding: 0 5px;
      /* Add small padding */
    }
    
    .product-name {
      font-size: 16px;
      margin-top: 5px;
      margin-bottom: 8px;
    }
    
    .product-price {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      /* Reduced from 10px */
    }
    
    .original-price {
      font-size: 15px;
      /* Smaller */
      text-decoration: line-through;
      color: #999;
      margin-right: 8px;
      /* Smaller margin */
    }
    
    .discounted-price {
      font-size: 15px;
      /* Smaller */
      font-weight: bold;
    }
    
    /* Quantity selector - more compact */
    .quantity-selector {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }
    
    .quantity-selector,
    .color-selector,
    .size-selector {
      margin-bottom: 5px;
      /* Consistent small margins */
    }
    
    .quantity-btn {
      width: 25px;
      /* Smaller from 30px */
      height: 25px;
      /* Smaller from 30px */
      border: 1px solid #ddd;
      background-color: #f8f8f8;
      cursor: pointer;
      font-size: 16px;
      /* Smaller from 18px */
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .quantity-input {
      width: 40px;
      /* Smaller from 50px */
      height: 25px;
      /* Smaller from 30px */
      border: 1px solid #ddd;
      text-align: center;
      margin: 0 8px;
      /* Smaller from 10px */
    }
    
    .quantity-display {
      width: 35px;
      /* Smaller from 40px */
      height: 25px;
      /* Smaller from 30px */
      border: 1px solid #ddd;
      margin: 0 5px;
      text-align: center;
      line-height: 25px;
      /* Match height */
    }
    
    /* Color selector - more compact */
    .color-selector {
      display: block;
      margin-bottom: 8px;
      /* Smaller from 10px */
    }
    
    .color-selector label {
      display: block;
      margin-bottom: 4px;
      /* Smaller from 5px */
      font-size: 14px;
      /* Smaller font */
    }
    
    .color-options {
      display: flex;
      gap: 8px;
      /* Smaller from 10px */
    }
    
    .color-option {
      width: 28px;
      /* Smaller from 30px */
      height: 28px;
      /* Smaller from 30px */
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
      background-size: cover;
      background-position: center;
      transition: all 0.3s ease;
    }
    
    .color-option.selected {
      border: 2px solid rgba(0, 0, 0, 0.5);
      box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
      /* Smaller shadow */
      transform: scale(1.08);
      /* Slightly reduced scale */
    }
    
    /* Size selector - more compact */
    .size-selector {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      /* Aligns label to the left */
      margin-bottom: 8px;
      /* Smaller from 10px */
    }
    
    .size-selector label {
      margin-right: 8px;
      /* Smaller from 10px */
      font-size: 14px;
      /* Smaller font */
    }
    
    .size-options {
      display: flex;
      gap: 10px;
    }
    
    .size-option {
      width: 30px;
      height: 30px;
      border-radius: 5px;
      cursor: pointer;
      border: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
      /* Added smaller font */
      transition: all 0.3s ease;
    }
    
    .size-option.selected {
      background-color: #000000;
      color: white;
      border-color: #0056b3;
      transform: scale(1.08);
      /* Slightly reduced scale */
    }
    .size-option.unavailable {
  position: relative;
  opacity: 0.5;
  cursor: not-allowed;
}

.size-cross {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: red;
  font-weight: bold;
  pointer-events: none;
}

.unavailable-price
{
  Color: red;
  font-weight: bold;
}
/* For unavailable products */
.product-container.unavailable {
  opacity: 0.8;
  position: relative;
}

.product-container.unavailable::after {
  content: "SOLD OUT!!!";
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-15deg);
  background: rgba(255, 0, 0, 0.7);
  color: white;
  font-weight: bold;
  padding: 5px 15px;
  border-radius: 5px;
  z-index: 2;
}

/* Disable buttons for unavailable products */
.product-container.unavailable .add-to-cart-btn,
.product-container.unavailable .buy-now-btn {
  pointer-events: none;
  opacity: 0.5;
}
    /* Mobile layout adjustments - the core change to fix your issue */
    @media (max-width: 768px) {
      .product-container {
        flex-direction: column;
        align-items: center;
      }
      
      .product-image {
        flex-basis: auto;
        width: 100%;
        max-width: 120px;
        /* Smaller from 300px */
      }
      
      .product-details {
        width: 100%;
      }
    }
    
    /* Color tooltip styling */
    .color-option:hover::after {
      content: attr(data-color);
      position: absolute;
      bottom: -20px;
      /* Smaller from -25px */
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 3px 6px;
      /* Smaller from 4px 8px */
      border-radius: 3px;
      font-size: 11px;
      /* Smaller from 12px */
      white-space: nowrap;
    }
    
    /* Form elements */
    .form-section {
      margin-bottom: 15px;
      /* Smaller from 20px */
    }
    
    label {
      display: block;
      margin: 8px 0 4px;
      /* Smaller from 10px 0 5px */
      font-size: 14px;
      /* Added smaller font */
    }
    
    input,
    select,
    button {
      width: 100%;
      padding: 8px;
      /* Smaller from 10px */
      margin-bottom: 8px;
      /* Smaller from 10px */
    }
    
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 15px;
      /* Added smaller font */
    }
    
    button:hover {
      background-color: #45a049;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      
    }
    
    /* Validation error */
    .validation-error {
      color: red;
      font-size: 0.8rem;
      margin-top: 4px;
      /* Smaller from 5px */
      display: none;
    }
  </style>
  
  <style>
    /* Main product container styling */
    /* Add this to your existing CSS */
    @media (max-width: 768px) {
      
      /* Ensure container doesn't overflow */
      .product-container {
        box-sizing: border-box;
        width: 100%;
        padding: 4px;
        overflow: hidden;
        /* Prevent content overflow */
      }
      
      /* Make product details fit within container */
      .product-details {
        width: 100%;
        padding: 2px;
        box-sizing: border-box;
      }
      
      /* Smaller text for all product elements */
      .product-name {
        font-size: 14px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      
      /* Adjust prices to fit */
      .product-price {
        flex-wrap: wrap;
        /* Allow prices to wrap if needed */
      }
      
      .original-price,
      .discounted-price {
        font-size: 14px;
        margin-right: 4px;
      }
      
      /* Make selectors more compact */
      .color-selector label,
      .size-selector label {
        font-size: 12px;
      }
      
      /* Smaller color and size options */
      .color-option {
        width: 20px;
        height: 20px;
      }
      
      .size-option {
        width: 23px;
        height: 23px;
      }
      
      /* Smaller quantity controls */
      .quantity-btn,
      .quantity-display {
        width: 20px;
        height: 20px;
        font-size: 12px;
      }
    }
    
    
    
    /* Main product container styling */
  </style>
  
  <style>
    /* navigation button animation */
    
    /* --- Touch Device Adjustments --- */
    @media (hover: none) {

      /* 1. Reset hover styles specifically for touch */
      button:hover {
        background-color: #4CAF50;
        /* Reset to original main button color */
        box-shadow: none;
        /* Remove hover shadow */
      }
      
      .navigation-btn:hover,
      .back-btn:hover {
        background-color: #222222;
        /* Reset to original nav button color */
      }
      
      .add-to-cart-btn:hover,
      .buy-now-btn:hover,
      .panel-add-to-cart:hover {
        background-color: #1C1C1E;
        /* Reset to original dark button color */
      }
      
      .quantity-btn:hover {
        background-color: #f8f8f8;
        /* Reset */
      }
      
      .panel-quantity-btn:hover {
        background-color: #f0f0f0;
        /* Reset */
      }
      
      /* Reset hover for size/color options if they had hover effects you want to disable */
      
      .color-option:hover {
        /* Reset to base styles or remove hover effect */
        border: 2px solid transparent;
        box-shadow: none;
        transform: none;
      }
      
      .color-option:hover::after {
        /* Hide tooltip on touch hover */
        display: none;
      }
      
      
      /* 2. Define :active styles for tap feedback on touch */
      button:active {
        /* Style for the main green Place Order button */
        background-color: #3e8e41;
        /* Darker green */
        transform: scale(0.98);
        /* Optional: slight press down effect */
      }
      
      .navigation-btn:active,
      .back-btn:active {
        background-color: #45a049;
        /* Use the green color from desktop hover */
        transform: scale(0.98);
      }
      
      .add-to-cart-btn:active,
      .buy-now-btn:active,
      .panel-add-to-cart:active {
        background-color: #4CAF50;
        /* Use green for feedback */
        transform: scale(0.98);
      }
      
      .quantity-btn:active,
      .panel-quantity-btn:active {
        background-color: #ddd;
        /* Darker gray for quantity buttons */
        transform: scale(0.95);
      }
      
      .color-option:active {
        transform: scale(0.95);
        /* Press down effect */
        box-shadow: 0 0 6px rgba(0, 0, 0, 0.4);
        /* Add shadow on press */
      }
      
       .product-container {
        -webkit-tap-highlight-color: transparent; /* Or rgba(0,0,0,0) */
    }
    /* --- END --- */

    /* Keep the rules for specific elements inside the card as a backup */
    .product-container .color-option,
    .product-container .quantity-btn,
    .product-container .size-option,
    .product-container .add-to-cart-btn,
    .product-container .buy-now-btn,
    .product-container .product-image, /* If image is clickable */
    .product-container .view-details-icon { /* If eye icon is clickable */
        -webkit-tap-highlight-color: transparent; /* Or rgba(0,0,0,0) */
    }

    /* Keep rules for other areas like order summary */
    .order-summary .cart-qty-btn,
    .order-summary .remove-item-btn {
         -webkit-tap-highlight-color: transparent; /* Or rgba(0,0,0,0) */
    }
    }
    
    /* --- End Touch Device Adjustments --- */
    
    button,
    .navigation-btn,
    .add-to-cart-btn,
    .buy-now-btn,
    .panel-add-to-cart,
    .quantity-btn,
    .panel-quantity-btn,
    .size-option,
    .color-option

    /* Add other tappable elements if desired */
      {
      /* Make sure existing padding, border, etc. are defined */
      transition: background-color 0.15s ease-out, border-color 0.15s ease-out, transform 0.1s ease-out, box-shadow 0.15s ease-out;
      /* Adjust properties and duration as needed */
      -webkit-tap-highlight-color: transparent;
      /* Optional: removes the default grey tap highlight on some mobile browsers */
    }
    
    /* Specifically for size/color options if you want a scale effect */
    .size-option,
    .color-option {
      transition: background-color 0.15s ease-out, border-color 0.15s ease-out, transform 0.15s ease-out, box-shadow 0.15s ease-out;
    }
    
    /* navigation button animation */
  </style>
  
  <style>
    /* Navigation styling*/
    /* Navigation buttons */
    .navigation-buttons {
      display: flex;
      justify-content: center;
      margin: 20px 0;
      padding: 10px;
    }
    
    .navigation-btn,
    .submit-button {
      background-color: #222222;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 5px;
      cursor: pointer;
      
      font-size: 16px;
      transition: background-color 0.3s;
    }
    
    
    
    .navigation-btn:hover {
      background-color: #45a049;
    }
    
    .back-btn {
      background-color: #222222;
      color: white;
      margin-bottom: 15px;
      width: 100%;
      max-width: 100%;
      position: sticky;
      top: 0;
      z-index: 1000;
      /* ensures it stays above other content */
    }
    
    .back-btn:hover {
      background-color: #45a049;
    }
    
    
    /* Style for the page class */
    .page {
      display: none;
    }
    
    .page.active {
      display: block;
    }
    
    /* Make sure our buttons have proper styles */
    .product-buttons {
      display: flex;
      flex-direction: column;
      margin-top: 10px;
    }
    
    .buttons-row {
      display: flex;
      gap: 5px;
      width: 100%;
    }
    
    .add-to-cart-btn,
    .buy-now-btn {
      padding: 8px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: normal;
      flex: 1;
    }
    
    .add-to-cart-btn {
      background-color: #1C1C1E;
      color: white;
    }
    
    .buy-now-btn {
      background-color: #1C1C1E;
      color: white;
    }
    
    
    
    /* Add these styles inside your existing @media query for mobile */
    @media (max-width: 768px) {
      /* Existing mobile styles... */
      
      /* Button adjustments for mobile */
      .product-buttons {
        margin-top: 5px;
      }
      
      .buttons-row {
        gap: 3px;
        /* Reduce gap between buttons */
      }
      
      .add-to-cart-btn,
      .buy-now-btn {
        padding: 5px 8px;
        font-size: 12px;
      }
    }
  </style>
  
  <style>
    /* Side panel that slides in from right */
    .product-slide-panel {
  position: fixed;
  top: 0;
  right: 0;
  width: 400px;
  height: 100vh;
  background-color: white;
  box-shadow: -2px 0 10px rgba(0, 0, 0, 0.2);
  z-index: 9000;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  transform: translateX(100%);
  opacity: 0;
  pointer-events: none;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.product-slide-panel.active {
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
}

    
    /* Panel header with close button */
    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid #eee;
      background-color: transparent;
      /* transparent background */
      position: sticky;
      top: 0;
      z-index: 999;
      backdrop-filter: blur(8px);
      /* optional: makes background behind it look frosted */
    }
    
    
    
    .panel-title {
      font-size: 18px;
      font-weight: bold;
      margin: 0;
    }
    
    .close-panel {
      width: 30px;
      height: 30px;
      background-color: #222222;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-weight: bold;
      font-size: 18px;
      border: none;
    }
    
    /* Panel image section */
    .panel-image-container {
      width: 100%;
      min-height: 40vh;
      max-height: 40vh;
      /* Increased from 40vh */
      position: relative;
      overflow: hidden;
      border-bottom: 1px solid #eee;
      background-color: #f8f8f8;
    }
    
    @media (max-width: 720px) {
      .panel-image-container {
        min-height: 40vh;
        /* Smaller minimum height on mobile */
        max-height: 40vh;
      }
    }
    
    .panel-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    
    /* Image navigation */
    .panel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 36px;
      height: 36px;
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
      border: none;
    }
    
    .panel-nav:hover {
      background-color: rgba(0, 0, 0, 0.8);
    }
    
    .prev-panel-image {
      left: 10px;
    }
    
    .next-panel-image {
      right: 10px;
    }
    
    /* Thumbnail styles removed */
    
    /* Product description section */
    .panel-product-details {
      padding: 15px;
      flex-grow: 1;
    }
    
    .panel-product-name {
      font-size: 20px;
      margin: 0 0 10px 0;
    }
    
    .panel-product-price {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .panel-original-price {
      text-decoration: line-through;
      color: #888;
    }
    
    .panel-discounted-price {
      font-weight: bold;
      color: #e53935;
      font-size: 18px;
      text-align: left;
    }
    
    .panel-options-section {
      margin-bottom: 15px;
    }
    
    .panel-options-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    
    .panel-color-options,
    .panel-size-options {
      display: flex;
      gap: 8px;
      margin-bottom: 15px;
    }
    
    .panel-color-option {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      background-size: cover;
      border: 2px solid transparent;
    }
    
    .panel-color-option.selected {
      border-color: #4CAF50;
    }
    
    .panel-size-option {
      min-width: 30px;
      height: 30px;
      border-radius: 5px;
      border: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      padding: 0 10px;
    }
    
    .panel-size-option.selected {
      background-color: #000000;
      color: white;
      border-color: #4CAF50;
    }
    
    .panel-size-chart {
      margin: 15px 0;
      max-width: 100%;
    }
    
    .panel-size-chart img {
      width: 100%;
      height: auto;
      border: 1px solid #eee;
      border-radius: 4px;
    }
    
    
    .description-title {
      font-weight: bold;
      /* margin-bottom: 3px; */
      /* Remove or set to 0 */
      margin-bottom: 3;
      /* No space below the title */
      font-size: 16px;
    }
    
    .panel-description {
      
      font-size: 15px;
      color: #333;
      /* font-weight: medium; */
      /* 'medium' is often the default, same as 400. Consider 'normal' or a number like 400 or 500 if needed */
      font-weight: normal;
      /* Or 400 */
      line-height: 1.5;
    }
    
    
    
    /* Panel add to cart section */
    .panel-actions {
      padding: 15px;
      border-top: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .panel-quantity {
      display: flex;
      align-items: center;
    }
    
    .panel-quantity-btn {
      width: 30px;
      height: 30px;
      background: #f0f0f0;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
    }
    
    .panel-quantity-display {
      min-width: 40px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #ddd;
      margin: 0 5px;
    }
    
    .panel-add-to-cart {
      background-color: #1C1C1E;
      color: white;
      border: none;
      padding: 10px 20px;
      margin-left: 10px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: normal;
    }
    
    /* Overlay */
    .panel-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 8999;
      display: none;
    }
    
    .panel-overlay.active {
      display: block;
    }
    
    /* For unavailable sizes in the panel */
.panel-size-option.unavailable {
  position: relative;
  opacity: 0.5;
  cursor: not-allowed;
}

.panel-size-option .size-cross {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: red;
  font-weight: bold;
  pointer-events: none;
}

/* Ensure panel add to cart button is disabled for unavailable products */
.product-container.unavailable~.product-panel .panel-add-to-cart {
  pointer-events: none;
  opacity: 0.5;
}
    
    /* Responsive adjustments */
    @media (max-width: 720px) {
      .product-slide-panel {
        width: 85%;
      }
      
      .panel-color-option,
      .panel-size-option {
        width: 28px;
        height: 28px;
      }
    }
    
    /* Side panel that slides in from right */
  </style>
  
  <style>
    /* product image eye*/
    .product-image {
      position: relative;
      cursor: pointer;
    }
    
    .eye-overlay {
      position: absolute;
      top: 5%;
      right: 5px;
      width: 40px;
      height: 40px;
      background-color: rgba(0, 0, 0, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.2;
      transition: opacity 0.3s ease;
    }
    
    .eye-overlay svg {
      width: 24px;
      height: 24px;
      color: #333;
    }
    
    /* Desktop hover effect */
    @media (hover: hover) {
      .product-image:hover .eye-overlay {
        opacity: 1;
      }
    }
    
    /* Mobile touch effect */
    @media (hover: none) {
      .eye-overlay {
        opacity: 0.7;
        /* Make the eye icon always slightly visible on mobile */
        background-color: rgba(0, 0, 0, 0.2);
      }
      
      /* Pulse animation for mobile */
      @keyframes pulse {
        0% {
          transform: translate(-50%, -50%) scale(1);
        }
        
        50% {
          transform: translate(-50%, -50%) scale(1.1);
        }
        
        100% {
          transform: translate(-50%, -50%) scale(1);
        }
      }
      
      .eye-overlay {
        animation: pulse 2s infinite;
      }
    }
    
    /* Responsive sizing for smaller screens */
    @media (max-width: 768px) {
      .eye-overlay {
        width: 32px;
        height: 32px;
      }
      
      .eye-overlay svg {
        width: 20px;
        height: 20px;
      }
    }
    
    
    
    /* product image eye*/
  </style>
  
  <style>
    /* Order summery*/
    /* Base styles */
    .order-summary {
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 15px;
      margin-top: 20px;
      background-color: #f9f9f9;
      max-width: 100%;
      box-sizing: border-box;
    }
    
    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
      font-size: 0.85rem;
      white-space: normal;
      /* Changed from nowrap to allow wrapping */
    }
    
    .summary-label {
      color: #666;
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      padding-right: 10px;
    }
    
    .summary-value {
      font-weight: 500;
      text-align: right;
      min-width: 80px;
      /* Ensure values have minimum width */
    }
    
    .product-summary {
      display: none;
    }
    
    .product-summary.visible {
      display: block;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid #ddd;
    }
    
    .summary-row.total-row {
      border-bottom: none;
      font-weight: bold;
      margin-top: 10px;
      padding-top: 15px;
      border-top: 2px solid #ddd;
    }
    
    .validation-message {
      color: #dc3545;
      margin-top: 10px;
      display: none;
    }
    
    /* Cart item styles */
    .summary-item {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      padding: 10px 0;
    }
    
    .summary-item-image {
      width: 40px;
      height: 40px;
      border-radius: 5px;
      object-fit: cover;
      margin-right: 10px;
    }
    
    .summary-item-details {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-width: 200px;
    }
    
    .summary-item-name {
      font-weight: 500;
      margin-bottom: 2px;
    }
    
    .summary-item-variant {
      font-size: 0.75rem;
      color: #666;
    }
    
    .remove-item-btn {
      background: rgba(220, 53, 69, 0.1);
      /* Light red tint */
      border-radius: 4px;
      color: #dc3545;
      display: flex;
      align-items: center;
      /* Centers vertically */
      justify-content: center;
      /* Centers horizontally */
      width: 30px;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      padding: 0 5px;
      margin-left: 10px;
    }
    
    .cart-item-quantity {
      display: flex;
      align-items: center;
      margin-top: 5px;
    }
    
    .cart-qty-btn {
      background: #6C757D;
      color: ghostwhite;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 24px;
      /* Increased for better touch targets */
      height: 24px;
      /* Increased for better touch targets */
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      line-height: 1;
      cursor: pointer;
    }
    
    .cart-item-quantity span {
      margin: 0 8px;
      font-size: 0.8rem;
    }
    
    /* Responsive styles */
    @media screen and (max-width: 768px) {
      .order-summary {
        padding: 10px;
      }
      
      .summary-item {
        padding: 15px 0;
      }
      
      .summary-item-details {
        min-width: 150px;
      }
    }
    
    @media screen and (max-width: 480px) {
      .summary-row {
        flex-direction: row;
        padding: 10px 0;
      }
      
      .summary-value {
        margin-top: 5px;
        text-align: left;
      }
      
      .summary-row.total-row {
        flex-direction: row;
      }
      
      .summary-item {
        flex-direction: row;
      }
      
      .summary-item-image {
        margin-bottom: 10px;
      }
      
      .cart-item-quantity {
        margin-top: 10px;
      }
      
    }
    
    /* Order summery*/
  </style>
  
  <style>
  //whatsapp button
    //Whatsapp message button pop up
    @keyframes bounce {
      
      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }
      
      40% {
        transform: translateY(-10px);
      }
      
      60% {
        transform: translateY(-5px);
      }
    }
    
    .whatsapp-bounce {
      animation: bounce 0.8s ease;
    }
    
    .whatsappButton {
      position: fixed; 
      bottom: 180px; 
      right: 20px; 
      width: 60px; 
      height: 60px; 
 
      border-radius: 50%; 
      box-shadow: 0 4px 4px rgba(0, 0, 0, 0.3); 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      z-index: 1000; 
      backdrop-filter: blur(8px);
      cursor: pointer; 
      transition: transform 0.3s ease;
      
    }
    
.whatsapp-background {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  text-decoration: none;
  
  /* Glassy styles */
  background: rgba(255, 255, 255, 0.1);
  /* light transparent background */
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}
    /* Add this for the close button on WhatsApp */
    .whatsapp-close {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 20px;
      height: 20px;
      background-color: #222;
      color: white;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12px;
      cursor: pointer;
      z-index: 1001;
    }
    
    
    .empty-space {
      
      height: 200px;
      /* Adjust height as needed */
      
      background-color: transparent;
      /* Make it invisible if desired */
      
    }
  </style>
  
  <style>
    /* More minimalistic category navigation style */
    .category-nav,
    .subcategory-nav {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 5px 0;
      padding: 0;
    }
    
    /* Button Style for Categories */
    .category-btn {
      padding: 6px 12px;
      background-color: transparent;
      color: #666;
      border: 1px solid #ddd;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      white-space: nowrap;
      transition: all 0.2s ease;
    }
    
    .category-btn.active {
      background-color: #f0f0f0;
      color: #000;
      border-color: #ccc;
    }
    
    .category-btn:hover {
      background-color: #f5f5f5;
    }
    
    /* Subcategory style */
    .subcategory-nav {
      margin-top: 0;
    }
    
    .subcategory-group {
      display: none;
      width: 100%;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .subcategory-group.active {
      display: flex;
    }
    
    .subcategory-btn {
      padding: 4px 10px;
      background-color: transparent;
      color: #666;
      border: 1px solid #eee;
      border-radius: 4px;
      font-size: 0.9em;
      cursor: pointer;
      white-space: nowrap;
    }
    
    .subcategory-btn.active {
      background-color: #eee;
      color: #000;
    }
    
    .subcategory-btn:hover {
      background-color: #f9f9f9;
    }
  </style>
</head>

<body>
  
  <div id="products-page" class="page active">
    <!-- All product containers go here -->
    
    <!-- Site name-->
    <h1>H&M CLASIC</h1>
    
    <div class="category-nav">
      <!-- Categories will be added dynamiclly-->
    </div>
    <div class="subcategory-nav">
      <!-- Subcategories will be added dynamiclly-->
    </div>
    
    
    <form id="order-form" action="https://docs.google.com/forms/d/e/1FAIpQLSda7l1jjcN2i6lNFO8t7diVPZli9PqXTJ2YuhOv3zNlD6RZbg/formResponse" method="POST">
      
      <div class="products-grid">
        <!-- Product's will be added here dynamically-->
        Loading...
      </div>
  </div>
  
  <!-- Checkout Page -->
  <div id="checkout-page" class="page">
    <h2>Checkout</h2>
    
    <!-- Order Summary -->
    <div class="order-summary">
      <h3>Order Summary</h3>
      
      <div id="products-summary">
        <!-- Products will be dynamically added here -->
      </div>
      <div class="summary-row">
        <span class="summary-label">Delivery Charge</span>
        <span id="delivery-value" class="summary-value">130 Tk</span>
      </div>
      <div class="summary-row total-row">
        <span class="summary-label">Total</span>
        <span id="total-value" class="summary-value">130 Tk</span>
      </div>
    </div>
    
    
    <!-- Delivery Location -->
    <div class="form-section">
      <h3>Delivery Location</h3>
      <label for="delivery-location">Select Delivery Location:</label>
      <select id="delivery-location" name="entry.883422688" onchange="updateCartDisplay()" style="width: 100%; max-width: 100%; box-sizing: border-box;">
        <option value="Inside Dhaka (70 Tk)">ঢাকার ভিতরে — ৭০</option>
        <option value="Outside Dhaka (130 Tk)" selected>ঢাকার বাইরে – ১৩০</option>
      </select>
    </div>
    
    
    
    <!-- Billing Details -->
    <div class="form-section">
      <h3>Billing Details</h3>
      <label for="name">আপনার নাম:</label>
      <input type="text" id="name" name="entry.1295621272" required placeholder="..." style="width: 100%; max-width: 100%; box-sizing: border-box;">
      
      <label for="phone">আপনার মোবাইল নাম্বার:</label>
      <input type="tel" id="phone" name="entry.1220849713" required placeholder="01xxxxxxxxx" style="width: 100%; max-width: 100%; box-sizing: border-box;">
      
      <label for="address">ডেলিভারির জন্য সম্পূর্ণ ঠিকানা:</label>
      <input type="text" id="address" name="entry.1101791371" required placeholder="বাসা নম্বর, রোড, থানা, জেলা সহ লিখুন" style="width: 100%; max-width: 100%; box-sizing: border-box;">
      
      <label for="special-message">Special Message:</label>
      <textarea id="special-message" name="entry.xxxxxxxxxx" rows="5" placeholder=" যদি কিছু বিশেষ অনুরোধ থাকে, এখানে লিখুন..." style="
width: 100%;
max-width: 100%;
box-sizing: border-box;
font-family: 'Caveat', Fantasy;
font-size: 14px;
color: #333;
padding: 10px;
border-radius: 6px;
border: 1px solid #ccc;
resize: vertical;
"></textarea>
    </div>
    
    
    
    <!-- Payment Method -->
    <div class="form-section">
      <h3>Payment Method</h3>
      <label for="payment-method">Select Payment Method:</label>
      <select id="payment-method" name="entry.303544925" required onchange="handlePaymentMethodChange()">
        <option value="Bkash">Bkash(Will be available soon)</option>
        <option value="Visa">Visa(Will be available soon)</option>
        <option value="Cash on Delivery" selected>ক্যাশ অন ডেলিভারি (প্রোডাক্ট হাতে পেয়ে টাকা দিবেন)</option>
      </select>
    </div>
    
    
    <!-- Empty cart validation -->
    <div id="checkout-validation-error" style="color: red; margin-bottom: 10px; display: none; font-weight: bold; text-align: center;">
      Please select at least one product to place an order.
    </div>
    <!-- Submit Button -->
    <button type="submit" class="submit-button" id="submit-button">Place Order</button>
  </div>
  
  
  
  
  
  <!-- WhatsApp Button -->
  <div class="whatsappButton" id="whatsappButton" onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';">
    
    <div class="whatsapp-close" onclick="hideWhatsappButton(event)">✕</div>
    
    <a href="https://wa.me/8801777122287?text=I%20need%20help%20with%20ordering" target="_blank" rel="noopener noreferrer" class="whatsapp-background">
      <img src="https://i.postimg.cc/xC57QnzN/whatsapp-icon-3.png" alt="WhatsApp Chat" style="width: 35px; height: 35px;">
    </a>
    
    <div style="position: absolute; bottom: 50%; right: 70px; background-color:white; color: #333333; font-size: 14px; padding: 8px 12px; border-radius: 10px; box-shadow: 0 4px 4px rgba(0, 0, 0, 0.2); opacity: 0; white-space: nowrap; z-index: 999; transform: scale(0.9) translateX(20px); transition: all 0.5s ease;" id="messageBox">
      <b>প্রয়োজনে মেসেজ করুন</b>
    </div>
    
  </div>
  
  
  <!--empty space -->
  <div class="empty-space"></div>
  
  
  
  <script>
    // Main Product configurations
    // Enhanced Product configurations
  const productConfigs = {
  product1: {
    id: "product1",
    name: "Polo Summer - White",
    category: "polo",
    
    basePrice: 800,
    originalPrice: 1200,
    sizes: ["M", "L", "XL"],
    description: '<strong>Fabric:</strong> China Pin Mesh (super smooth, best for summer)<br><strong>GSM:</strong> 170...<br><strong>Print:</strong> High-Density, and Rubber.(Top Quality)',
    mainImage: "https://i.postimg.cc/RVfGB6B5/b20d1fb21f28408b979afab1bb0dac860ae09801.avif",
    colorOptions: [
    {
      color: "Main",
      image: "https://i.postimg.cc/RVfGB6B5/b20d1fb21f28408b979afab1bb0dac860ae09801.avif",
      previewOnly: true //set false for colour selection
    },
    {
      color: "Full",
      image: "https://i.postimg.cc/cLBmvpCF/96a027b0b42a6cbe21b46d742b80a4fbc342db55.avif",
      previewOnly: true //set false for colour selection
    },
    {
      color: "Back",
      image: "https://i.postimg.cc/rwkjFVVd/a37e355f8a8949deede7773fff4d0a89174f48df.avif",
      previewOnly: true //set false for colour selection
    }],
    sizeChart: 'https://i.postimg.cc/JhjpTdw6/Messenger-creation-FDB25-B12-BA5-D-4488-8-A5-F-654533-C51958.jpg',
    active: true // Set to false to hide product
  },
  
  
  // Product 3
product2: {
  id: "product2",
  name: "LOOSE FIT PRINTED - White Doodle",
  category: "t-shirt",
  
  basePrice: 650,
  originalPrice: null,
  sizes: ["M","XL", "2XL"],
  description: '<strong>Fabric:</strong> China Pin Mesh (super smooth, best for summer)<br><strong>GSM:</strong> 170...<br><strong>Print:</strong> High-Density, and Rubber.(Top Quality)',
  mainImage: "https://i.postimg.cc/mDtN6hwn/3f62e23710f1ed16457101e1c8cfb4b5ef56358b.avif",
  colorOptions: [
  {
    color: "Main",
    image: "https://i.postimg.cc/mDtN6hwn/3f62e23710f1ed16457101e1c8cfb4b5ef56358b.avif",
    previewOnly: true
  },
  {
    color: "Front",
    image: "https://i.postimg.cc/d0Q9r5Tw/680431bc0872f88d3d23c1eab90d602e75d0fc5a.avif",
    previewOnly: true
  },
  ],
  sizeChart: 'https://i.postimg.cc/JhjpTdw6/Messenger-creation-FDB25-B12-BA5-D-4488-8-A5-F-654533-C51958.jpg',
  active: true // Set to false to hide product
},

// Product 2
product3: {
  id: "product3",
  name: "POLO SUMMER - Brown",
  category: "polo",
  
  basePrice: 800,
  originalPrice: 1200,
  sizes: ["M", "L", "XL"],
  description: '<strong>Fabric:</strong> China Pin Mesh (super smooth, best for summer)<br><strong>GSM:</strong> 170...<br><strong>Print:</strong> High-Density, and Rubber.(Top Quality)',
  mainImage: "https://i.postimg.cc/kM2fTYY5/0bae58545583fd2be92f00b904c29bcbb96d10e8.avif",
  colorOptions: [
  {
    color: "Main",
    image: "https://i.postimg.cc/kM2fTYY5/0bae58545583fd2be92f00b904c29bcbb96d10e8.avif",
    previewOnly: true
  },
  {
    color: "Full",
    image: "https://i.postimg.cc/jCVWcSgy/56f9fbc04bc768ff85c8c2378982ccd8955592a1.avif",
    previewOnly: true
  },
  {
    color: "Back",
    image: "https://i.postimg.cc/j2nwy7Xs/5ece295b738a0edb5b97e62ced44d900c794b3f8.avif",
    previewOnly: true
  }],
  sizeChart: 'https://i.postimg.cc/JhjpTdw6/Messenger-creation-FDB25-B12-BA5-D-4488-8-A5-F-654533-C51958.jpg',
  active: true // Set to false to hide product
},

  // Product 4
  product4: {
    id: "product4",
    name: "LOOSE FIT PRINTED - White BX",
    category: "t-shirt",
    
    basePrice: 550,
    originalPrice: null,
    sizes: ["M","L"],
    description: '<strong>Fabric:</strong> China Pin Mesh (super smooth, best for summer)<br><strong>GSM:</strong> 170...<br><strong>Print:</strong> High-Density, and Rubber.(Top Quality)',
    mainImage: "https://i.postimg.cc/tJHtk6qN/750d4032fab974dd9fc0993d4914ba648e6c4400.webp",
    colorOptions: [
    {
      color: "Main",
      image: "https://i.postimg.cc/tJHtk6qN/750d4032fab974dd9fc0993d4914ba648e6c4400.webp",
      previewOnly: true
    },
    {
      color: "Front",
      image: "https://i.postimg.cc/XqcKzvXS/f2d952851ed013de6e1500730219610c90e93590.webp",
      previewOnly: true
    },
        {
      color: "Back",
      image: "https://i.postimg.cc/QNpqtfm4/9a4ee2267aa9b01bbf80c27539b2056ba777b555.webp",
      previewOnly: true
    },

    {
      color: "Full",
      image: "https://i.postimg.cc/1tFrDBQz/5cd55da81b4cda8fd32f807e145f949d1d96e8c5.webp",
      previewOnly: true
    }],
    sizeChart: 'https://i.postimg.cc/JhjpTdw6/Messenger-creation-FDB25-B12-BA5-D-4488-8-A5-F-654533-C51958.jpg',
    active: true // Set to false to hide product
  },
  
  // Product 5
product5: {
  id: "product5",
  name: "LOOSE FIT PRINTED - Tale Orange",
  category: "t-shirt",
  
  basePrice: 650,
  originalPrice: null,
  sizes: ["M", "L", "XL", "2XL"],
  description: '<strong>Fabric:</strong> China Pin Mesh (super smooth, best for summer)<br><strong>GSM:</strong> 170...<br><strong>Print:</strong> High-Density, and Rubber.(Top Quality)',
  mainImage: "https://i.postimg.cc/NMNB767W/557463be5851231108919dacc5707574a1e5863b.webp",
  colorOptions: [
  {
    color: "Main",
    image: "https://i.postimg.cc/NMNB767W/557463be5851231108919dacc5707574a1e5863b.webp",
    previewOnly: true
  },
  {
    color: "Front",
    image: "https://i.postimg.cc/7hfDB5Kb/1df5320488efd706925ceaba661157d172c5a17d.webp",
    previewOnly: true
  },
  {
    color: "Back",
    image: "https://i.postimg.cc/fyps1MPC/71933f98061e99f201935b283bbf9ec5448e2a63.webp",
    previewOnly: true
  }],
  sizeChart: 'https://i.postimg.cc/JhjpTdw6/Messenger-creation-FDB25-B12-BA5-D-4488-8-A5-F-654533-C51958.jpg',
  active: true // Set to false to hide product
},

// Product 8
product8: {
  id: "product8",
  name: "LOOSE FIT PRINTED - White Butterfly",
  category: "t-shirt",
  
  basePrice: null,
  originalPrice: null,
  sizes: [],
  description: '<strong>Fabric:</strong> China Pin Mesh (super smooth, best for summer)<br><strong>GSM:</strong> 170...<br><strong>Print:</strong> High-Density, and Rubber.(Top Quality)',
  mainImage: "https://i.postimg.cc/k4rbn0pg/4fbc908460bdeb9057994cf1ddaeb0f1ba81e306.webp",
  colorOptions: [
  {
    color: "Main",
    image: "https://i.postimg.cc/k4rbn0pg/4fbc908460bdeb9057994cf1ddaeb0f1ba81e306.webp",
    previewOnly: true
  },
  {
    color: "Full",
    image: "https://i.postimg.cc/yN3RC1nG/5100b987fc15eeecfca7d701a1d83aee5831159c.webp",
    previewOnly: true
  },
  {
    color: "Close",
    image: "https://i.postimg.cc/4xSc07vt/d0ac7839573bbd72a4d3958b018538ba1a9cf7c5.webp",
    previewOnly: true
  },
    {
  color: "Full Front",
  image: "https://i.postimg.cc/XYJFxc54/37cd69a657be573083c87ddf822000246d99bfee.webp",
  previewOnly: true
},
{
  color: "Full Back",
  image: "https://i.postimg.cc/MHqfByxk/602a5bf1b362ebcbde8045d60de7bbf8c6bb2538.webp",
  previewOnly: true
}
  ],
  sizeChart: 'https://i.postimg.cc/JhjpTdw6/Messenger-creation-FDB25-B12-BA5-D-4488-8-A5-F-654533-C51958.jpg',
  active: true // Set to false to hide product
},

// Product 6
product6: {
  id: "product6",
  name: "LOOSE FIT PRINTED - White Wave",
  category: "t-shirt",
  
  basePrice: 650,
  originalPrice: null,
  sizes: [ "L", "XL", "2XL"],
  description: '<strong>Fabric:</strong> China Pin Mesh (super smooth, best for summer)<br><strong>GSM:</strong> 170...<br><strong>Print:</strong> High-Density, and Rubber.(Top Quality)',
  mainImage: "https://i.postimg.cc/0NSzHtyR/5c88449c1cb587c09b8d9de2fa28e9905f6bc5bd.webp",
  colorOptions: [
  {
    color: "Main",
    image: "https://i.postimg.cc/0NSzHtyR/5c88449c1cb587c09b8d9de2fa28e9905f6bc5bd.webp",
    previewOnly: true
  },
  {
    color: "Full",
    image: "https://i.postimg.cc/2SMqGpm7/57d2f85d70c88c36b33324e8853a07d163f6c415.webp",
    previewOnly: true
  },
  {
    color: "Back",
    image: "https://i.postimg.cc/Nj59RGh0/fa8fff0ba0d12043e0ce7202665414ef32ec35eb.webp",
    previewOnly: true
  },
    {
  color: "Full",
  image: "https://i.postimg.cc/3JrDJCnm/9423109463d56dc226832f3b4ed820121e190929.webp",
  previewOnly: true
}
  ],
  sizeChart: 'https://i.postimg.cc/JhjpTdw6/Messenger-creation-FDB25-B12-BA5-D-4488-8-A5-F-654533-C51958.jpg',
  active: true // Set to false to hide product
},

// Product 7
product7: {
  id: "product7",
  name: "LOOSE FIT PRINTED - White News",
  category: "t-shirt",
  
  basePrice: 650,
  originalPrice: null,
  sizes: [ "XL", "2XL"],
  description: '<strong>Fabric:</strong> China Pin Mesh (super smooth, best for summer)<br><strong>GSM:</strong> 170...<br><strong>Print:</strong> High-Density, and Rubber.(Top Quality)',
  mainImage: "https://i.postimg.cc/zXdHLbcM/3feb771f7a753adf3dcc80a7ec3c47e194f33472.webp",
  colorOptions: [
  {
    color: "Main",
    image: "https://i.postimg.cc/zXdHLbcM/3feb771f7a753adf3dcc80a7ec3c47e194f33472.webp",
    previewOnly: true
  },
  {
    color: "Full",
    image: "https://i.postimg.cc/nVGDJwYn/e1351af9a613e2d1ba8afc9de86cd22c70fac61d.webp",
    previewOnly: true
  },
  {
    color: "Back",
    image: "https://i.postimg.cc/QCm9JHxF/9251055735cb1591f7bbbf69f651d2bbb001a577.webp",
    previewOnly: true
  }],
  sizeChart: 'https://i.postimg.cc/JhjpTdw6/Messenger-creation-FDB25-B12-BA5-D-4488-8-A5-F-654533-C51958.jpg',
  active: true // Set to false to hide product
},


  // Add other products here with the same structure
};


    // Delivery charges configuration
    const deliveryCharges = {
      "Inside Dhaka (70 Tk)": 70,
      "Outside Dhaka (130 Tk)": 130
    };
    
    // Product configurations
  </script>
  
  <script>
    // Dynamic product generation
    // Add this function after your productConfigs declaration
    function generateProductsHTML() {
      const productsGrid = document.querySelector('.products-grid');
      if (!productsGrid) return;
      
      // Clear existing products
      productsGrid.innerHTML = '';
      
      // Loop through all products in config
      Object.keys(productConfigs).forEach(productId => {
        const config = productConfigs[productId];
        
        // Skip inactive products
        if (config.active === false) return;
        
        // Create product container with availability check
const productContainer = document.createElement('div');
productContainer.className = 'product-container';
productContainer.id = productId;

// Check if product has valid price data
const isPriceAvailable = config.basePrice !== null && config.basePrice !== undefined;
if (!isPriceAvailable) {
  productContainer.classList.add('unavailable');
  productContainer.id = `unavailable-${productId}`;
}
        
        // Add data attributes for filtering
        if (config.category) {
          productContainer.setAttribute('data-category', config.category);
        }
        if (config.subCategory) {
          productContainer.setAttribute('data-subcategory', config.subCategory);
        }
        
        // Then modify the price display part to handle null prices:
// Replace the price HTML with:
let priceHTML = '';
if (isPriceAvailable) {
  priceHTML = `
    ${config.originalPrice ? `<span class="original-price">৳${config.originalPrice}</span>` : ''}
    <span class="discounted-price">৳${config.basePrice}</span>
  `;
} else {
  priceHTML = `<span class="unavailable-price">SOLD OUT!!!</span>`;
}
        
        // Generate color options HTML
        let colorOptionsHTML = '';
        config.colorOptions.forEach((colorOpt, index) => {
          const isSelected = index === 0 ? 'selected' : '';
          const previewOnlyAttr = colorOpt.previewOnly ? ', true' : '';
          
          colorOptionsHTML += `
        <div class="color-option ${isSelected}" 
             style="background-image: url('${colorOpt.image}');" 
             data-color="${colorOpt.color}" 
             onclick="selectColor('${productId}', null, this${previewOnlyAttr})"></div>
      `;
        });
        
        // Modify the size options HTML generation in the generateProductsHTML function
// Replace the current size options HTML generation with:

// Generate size options HTML - show all possible sizes with unavailable ones crossed out
let sizeOptionsHTML = '';
const allPossibleSizes = ["M", "L", "XL", "2XL"]; // Define all possible sizes
allPossibleSizes.forEach(size => {
  const isAvailable = config.sizes.includes(size);
  const availabilityClass = isAvailable ? 'available' : 'unavailable';
  const clickHandler = isAvailable ?
    `onclick="selectSize('${productId}', '${size}')"` :
    `class="disabled"`;
  
  sizeOptionsHTML += `
    <div class="size-option ${availabilityClass}" data-size="${size}" ${clickHandler}>
      ${size}${!isAvailable ? '<span class="size-cross">✕</span>' : ''}
    </div>
  `;
});
        
        // Create product HTML
        productContainer.innerHTML = `
      <div class="product-image">
        <img id="image-${productId}" src="${config.mainImage}" alt="${config.name}">
      </div>
      <div class="product-details">
        <div class="color-selector">
          <div class="color-options">
            ${colorOptionsHTML}
          </div>
        </div>
        <h3 class="product-name">${config.name}</h3>
       <div class="product-price">
  ${priceHTML}
</div>
        <div class="quantity-selector">
          <div class="quantity-btn" onclick="updateQuantity('${productId.replace('product', '')}', -1)">−</div>
          <div id="quantity${productId.replace('product', '')}" class="quantity-display">1</div>
          <div class="quantity-btn" onclick="updateQuantity('${productId.replace('product', '')}', 1)">+</div>
        </div>
        <div class="size-selector">
          <label>Size:</label>
          <div class="size-options">
            ${sizeOptionsHTML}
          </div>
        </div>
        <div class="product-buttons">
          <div class="buttons-row">
            <button type="button" class="add-to-cart-btn" onclick="addToCart('${productId}')">
              Add to Cart
            </button>
            <button type="button" class="buy-now-btn" onclick="buyNow('${productId}')">
              Buy Now
            </button>
          </div>
        </div>
      </div>
    `;
        
        // Add to products grid
        productsGrid.appendChild(productContainer);
      });
      
      // Initialize any required features for the new products
      addViewDetailsIcons();
    }
  </script>
  
  
  <script>
    // Add this function to extract categories from your product configurations
    function extractCategories() {
      // Create structure to hold categories and their subcategories
      const categories = {
        all: { name: "All", subcategories: {} }
      };
      
      // Process each product to build the category structure
      Object.values(productConfigs).forEach(product => {
        // Skip inactive products
        if (product.active === false) return;
        
        const category = product.category;
        const subCategory = product.subCategory;
        
        // Add category if it doesn't exist
        if (category && !categories[category]) {
          // Convert category ID to display name (e.g., "mens" -> "Men's")
          const displayName = category.charAt(0).toUpperCase() + category.slice(1);
          categories[category] = {
            name: displayName,
            subcategories: {}
          };
        }
        
        // Add subcategory if it exists and doesn't already exist in the category
        if (category && subCategory && !categories[category].subcategories[subCategory]) {
          // Convert subcategory ID to display name (e.g., "tshirt" -> "T-shirt")
          const displayName = subCategory.charAt(0).toUpperCase() + subCategory.slice(1);
          categories[category].subcategories[subCategory] = displayName;
        }
      });
      
      return categories;
    }
    
    // Function to generate category and subcategory navigation
    function generateCategoryNavigation() {
      const categories = extractCategories();
      
      // Generate main category navigation
      const categoryNav = document.querySelector('.category-nav');
      if (categoryNav) {
        categoryNav.innerHTML = ''; // Clear existing content
        
        // Add "All" category first
        const allBtn = document.createElement('div');
        allBtn.className = 'category-btn active';
        allBtn.setAttribute('data-category', 'all');
        allBtn.textContent = 'All';
        categoryNav.appendChild(allBtn);
        
        // Add other categories
        Object.keys(categories).forEach(catKey => {
          if (catKey !== 'all') {
            const btn = document.createElement('div');
            btn.className = 'category-btn';
            btn.setAttribute('data-category', catKey);
            btn.textContent = categories[catKey].name;
            categoryNav.appendChild(btn);
          }
        });
      }
      
      // Generate subcategory navigation
      const subcategoryNav = document.querySelector('.subcategory-nav');
      if (subcategoryNav) {
        subcategoryNav.innerHTML = ''; // Clear existing content
        
        // For each category (except "all"), create a subcategory group
        Object.keys(categories).forEach(catKey => {
          if (catKey !== 'all') {
            const subcategories = categories[catKey].subcategories;
            
            // Only create subcategory group if there are subcategories
            if (Object.keys(subcategories).length > 0) {
              const group = document.createElement('div');
              group.className = 'subcategory-group';
              group.setAttribute('data-parent', catKey);
              
              // Add subcategories to the group
              Object.keys(subcategories).forEach(subKey => {
                const btn = document.createElement('div');
                btn.className = 'subcategory-btn';
                btn.setAttribute('data-subcategory', subKey);
                btn.textContent = subcategories[subKey];
                group.appendChild(btn);
              });
              
              subcategoryNav.appendChild(group);
            }
          }
        });
      }
      
      // Add event listeners after generating the navigation
      initializeCategoryEventListeners();
    }
    
    // Function to initialize category event listeners
    function initializeCategoryEventListeners() {
      // Add event listeners to main category buttons
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          // Update active state
          document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          const category = this.getAttribute('data-category');
          
          // Handle subcategory groups visibility
          if (category === 'all') {
            // When "all" is clicked, hide all subcategory groups
            document.querySelectorAll('.subcategory-group').forEach(group => {
              group.classList.remove('active');
            });
          } else {
            // For specific categories, show only relevant subcategory group
            document.querySelectorAll('.subcategory-group').forEach(group => {
              if (group.getAttribute('data-parent') === category) {
                group.classList.add('active');
              } else {
                group.classList.remove('active');
              }
            });
          }
          
          // Filter products by category
          filterProducts(category, 'all');
        });
      });
      
      // Add event listeners to subcategory buttons
      document.querySelectorAll('.subcategory-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          // Get parent category and clicked subcategory
          const parentGroup = this.closest('.subcategory-group');
          const category = parentGroup.getAttribute('data-parent');
          const subcategory = this.getAttribute('data-subcategory');
          
          // Update active state for subcategory
          parentGroup.querySelectorAll('.subcategory-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          // Filter products by category and subcategory
          filterProducts(category, subcategory);
        });
      });
    }
    
    // Function to filter products by category and subcategory
// Function to filter products by category and subcategory
function filterProducts(category, subcategory) {
  const productContainers = document.querySelectorAll('.product-container');
  
  productContainers.forEach(container => {
    let originalProductId = container.id; // Get the current ID of the container
    
    // Check if the ID starts with 'unavailable-' and extract the original ID if it does
    if (originalProductId.startsWith('unavailable-')) {
      originalProductId = originalProductId.replace('unavailable-', '');
    }
    
    // Now, look up the product configuration using the potentially corrected original ID
    const productConfig = productConfigs[originalProductId];
    
    // If config is still not found (e.g., bad ID), hide it and log an error
    if (!productConfig) {
      console.error(`Config not found for original ID: ${originalProductId} (derived from container ID: ${container.id}). Hiding container.`);
      container.style.display = 'none';
      return; // Skip to the next container
    }
    
    // --- The rest of the filtering logic remains the same ---
    let shouldShow = false;
    
    // Handle "all" category
    if (category === 'all') {
      shouldShow = true;
    }
    // Handle specific category with "all" subcategory
    else if (category === productConfig.category && subcategory === 'all') {
      shouldShow = true;
    }
    // Handle specific category and subcategory
    else if (category === productConfig.category && subcategory === productConfig.subCategory) {
      shouldShow = true;
    }
    
    // Show/hide product based on the filtering logic
    container.style.display = shouldShow ? 'flex' : 'none';
  });
}    
    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      // Generate navigation first (before products)
      generateCategoryNavigation();
      
      // Generate product HTML
      generateProductsHTML();
      
      // Any other initialization remains the same...
    });
  </script>
  
  <script>
    // Page Navigation 
    // Initialize when the page loads
    document.addEventListener('DOMContentLoaded', function() {
      initializeCart();
      
      const defaultPage = location.hash?.substring(1) || 'products-page';

// Show correct page on first load (but don't push state again)
document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
document.getElementById(defaultPage).classList.add('active');
history.replaceState({ page: defaultPage }, '', `#${defaultPage}`);
updateFloatingCart();

// Listen for back/forward buttons
window.addEventListener('popstate', e => {
  const page = e.state?.page || 'products-page';
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(page).classList.add('active');
  window.scrollTo(0, 0);
  updateFloatingCart();
});
      
      // Initialize the app with proper page setup
      initializeApp();
      
      // After products are generated
      initializeCategoryNavigation();
      
      // Eye at product image
      // Add this line at the end of the function
      addViewDetailsIcons();
    });
    
    
    // Replace the complex navigation handling with the simpler approach from Fix 6
function navigateToPage(pageId) {
  // Show only the requested page
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(pageId).classList.add('active');

  // Scroll to top
  window.scrollTo(0, 0);

  // Update history
  history.pushState({ page: pageId }, '', `#${pageId}`);

  // Update cart button
  updateFloatingCart();
}

// Function to handle hash-based navigation
function handleHashNavigation() {
  const hash = window.location.hash.substr(1);
  if (hash === 'checkout-page' || hash === 'products-page') {
    navigateToPage(hash);
  } else {
    // Default to products page if no valid hash
    navigateToPage('products-page');
  }
}
    
    
    
    
    // Function to show cart notification
    // Function to show cart update for 2 sec
    function showCartNotification(message) {
      // Create notification element if it doesn't exist
      if (!document.getElementById('cart-notification')) {
        const notification = document.createElement('div');
        notification.id = 'cart-notification';
        document.body.appendChild(notification);
      }
      
      
      // Show notification with message
      const notification = document.getElementById('cart-notification');
      notification.textContent = message;
      notification.style.opacity = '1';
      
      // Hide notification after 2 seconds (changed from 3)
      setTimeout(() => {
        notification.style.opacity = '0';
      }, 2000); // Changed from 3000 to 2000 (2 seconds)
    }
    
    
    
    
    
    
    // Update floating cart button
    // Update floating cart button to not show in the check out page
    // Update floating cart button to not show total price
    // Update floating cart button to not show in the check out page
function updateFloatingCart() {
  const floatingCart = document.getElementById('floating-cart');
  if (!floatingCart) return;
  
  // Get current page
  const isCheckoutPage = document.getElementById('checkout-page').classList.contains('active');
  
  // If on checkout page, hide floating cart regardless of content
  if (isCheckoutPage) {
    floatingCart.style.display = 'none';
    return;
  }
  
  // Calculate total items
  let totalItems = 0;
  cart.forEach(item => {
    totalItems += item.quantity;
  });
  
  // Update cart count
  const cartCount = floatingCart.querySelector('.cart-count');
  cartCount.textContent = totalItems;
  
  // Update cart preview - ONLY show number of items, not price
  const cartPreview = floatingCart.querySelector('.cart-preview');
  if (cartPreview) {
    cartPreview.textContent = `${totalItems} items`;
  }
  
  // Show/hide floating cart based on cart content
  floatingCart.style.display = cart.length > 0 ? 'flex' : 'none';
}
    
    
    
    
    
    // Buy Now functionality
    // Buy Now functionality
    function buyNow(productId) {
      const product = document.getElementById(productId);
      
      // Get the selected color element - no longer required
      const selectedColorElement = product.querySelector('.color-option.selected');
      let selectedColor = "";
      if (selectedColorElement) {
        selectedColor = selectedColorElement.getAttribute('data-color');
      }
      
      // Check if size message already exists, remove it if it does
      const existingSizeMsg = product.querySelector('.size-warning');
      if (existingSizeMsg) {
        existingSizeMsg.remove();
      }
      
      // Get the selected size element
      const selectedSizeElement = product.querySelector('.size-option.selected');
      if (!selectedSizeElement) {
        // Create and insert size warning message
        const sizeWarning = document.createElement('div');
        sizeWarning.className = 'size-warning';
        sizeWarning.textContent = 'Please select a size';
        sizeWarning.style.color = 'blue';
        sizeWarning.style.marginTop = '5px';
        sizeWarning.style.fontWeight = 'reguler';
        
        // Insert before the product buttons
        const buttonContainer = product.querySelector('.product-buttons');
        buttonContainer.parentNode.insertBefore(sizeWarning, buttonContainer);
        return;
      }
      const selectedSize = selectedSizeElement.getAttribute('data-size');
      
      const quantityElement = document.getElementById(`quantity${productId.replace('product', '')}`);
      const quantity = parseInt(quantityElement.textContent);
      
      // Get the base image
      let productImage = product.querySelector('.product-image img').src;
      
      const cartItem = {
        productId: productId,
        quantity: quantity,
        color: selectedColor,
        size: selectedSize,
        price: productConfigs[productId].basePrice,
        itemId: generateItemId(),
        baseImage: productImage
      };
      
      cart.push(cartItem);
      quantityElement.textContent = '1';
      updateCartDisplay();
      
      // Then navigate to checkout page
      navigateToPage('checkout-page');
    }
    
    
    
    
    
    
    // Initialize floating cart button
    function initializeFloatingCart() {
      // Create floating cart button if it doesn't exist
      if (!document.getElementById('floating-cart')) {
        const floatingCart = document.createElement('div');
        floatingCart.id = 'floating-cart';
        floatingCart.className = 'floating-cart';
        floatingCart.innerHTML = `
      <div class="cart-count">0</div>
      <span class="cart-icon">🛒</span>
      <span class="cart-preview">0 items</span>
    `;
        floatingCart.addEventListener('click', () => {
          navigateToPage('checkout-page');
        });
        document.body.appendChild(floatingCart);
        
        // Add style for floating cart
        const style = document.createElement('style');
        
        document.head.appendChild(style);
      }
      
      // Update floating cart initially
      updateFloatingCart();
    }
    
    
    // First, let's modify the data structure to support multiple items of the same variant
    // We'll transform the selectedProducts to an array of items instead of a single item per product type
    
    // Initialize the cart as an array
    let cart = [];
    
    
    
    
    
    
    // Initialize the cart with one item from product1 by default
    function initializeCart() {
      // Start with an empty cart
      cart = [];
      
      // Get all product IDs from the config
      const productIds = Object.keys(productConfigs);
      
      productIds.forEach(productId => {
        const productElement = document.getElementById(productId);
        if (productElement) {
          const config = productConfigs[productId];
          
          // Handle color circles
          const colorOptions = productElement.querySelectorAll('.color-option');
          const previewOnlyColors = productElement.querySelectorAll('.color-option[data-preview-only]');
          
          // Check if the first color option is preview-only by checking its onclick attribute
          const firstColorOption = colorOptions[0];
          if (firstColorOption && firstColorOption.getAttribute('onclick').includes(', true)')) {
            // Don't auto-select preview-only colors
            colorOptions.forEach(option => option.classList.remove('selected'));
          }
          // If there are regular color options, select the first one as default
          else if (colorOptions.length > 0 && config && config.colors && config.colors.length > 0) {
            colorOptions.forEach(option => option.classList.remove('selected'));
            colorOptions[0].classList.add('selected');
            if (!colorOptions[0].getAttribute('data-color') && config.colors[0].name) {
              colorOptions[0].setAttribute('data-color', config.colors[0].name);
            }
          }
          
          // Deselect all sizes by default
          productElement.querySelectorAll('.size-option').forEach(option => {
            option.classList.remove('selected');
          });
        }
      });
      
      // Remove all checkboxes
      document.querySelectorAll('.product-checkbox').forEach(checkbox => {
        checkbox.remove();
      });
      
      // Update the cart display
      updateCartDisplay();
    }
    
    
    
    
    // Generate a unique ID for each cart item
    function generateItemId() {
      return 'item_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }
    
    // Remove an item from cart
    function removeFromCart(itemId) {
      cart = cart.filter(item => item.itemId !== itemId);
      updateCartDisplay();
      updateFloatingCart();
    }
    
    // Update quantity of an item in cart
    function updateCartItemQuantity(itemId, change) {
      const item = cart.find(item => item.itemId === itemId);
      if (item) {
        const newQuantity = Math.min(5, Math.max(1, item.quantity + change));
        item.quantity = newQuantity;
        updateCartDisplay();
        updateFloatingCart();
      }
    }
    
    
    
    
    
    
    
    // Update the cart display in the order summary
    // Update the cart display in the order summary
    function updateCartDisplay() {
      const productsSummary = document.getElementById('products-summary');
      if (!productsSummary) return;
      
      productsSummary.innerHTML = '';
      
      let subtotal = 0;
      
      if (cart.length === 0) {
        const emptyRow = document.createElement('div');
        emptyRow.className = 'summary-row product-summary visible';
        emptyRow.innerHTML = `
        <span class="summary-label">Your cart is empty</span>
        <span class="summary-value">0 Tk</span>
    `;
        productsSummary.appendChild(emptyRow);
      } else {
        cart.forEach((item, index) => {
          const productConfig = productConfigs[item.productId];
          const productNum = item.productId.replace('product', '');
          const itemTotal = item.price * item.quantity;
          subtotal += itemTotal;
          
          // Get the variant image URL from the color data or use base image
          let variantImageUrl = item.baseImage;
          if (item.color) {
            const colorOptions = document.querySelectorAll(`#${item.productId} .color-option`);
            colorOptions.forEach(option => {
              if (option.getAttribute('data-color') === item.color) {
                variantImageUrl = option.getAttribute('data-preview-image') || variantImageUrl;
              }
            });
          }
          
          const row = document.createElement('div');
          row.className = 'summary-row product-summary visible';
          
          // Adjust the display of variant information based on whether color is selected
          const variantInfo = item.color ? `${item.color}, ${item.size}` : `${item.size}`;
          
          row.innerHTML = `
<div class="summary-item">
  <img src="${variantImageUrl}" class="summary-item-image" alt="${productConfig.name}">
  <div class="summary-item-details">
    <div class="summary-item-name">
      ${productConfig.name} × ${item.quantity}
      <div class="summary-item-variant">${variantInfo}</div>
    </div>
     
     <div class="cart-item-quantity">
       <div class="cart-qty-btn" onclick="updateCartItemQuantity('${item.itemId}', -1)">−</div>
       <span>${item.quantity}</span>
       <div class="cart-qty-btn" onclick="updateCartItemQuantity('${item.itemId}', 1)">+</div>
       <div class="remove-item-btn" onclick="removeFromCart('${item.itemId}')">×</div>
     </div>
   </div>
   <span class="summary-value">${itemTotal} Tk</span>
 </div>
      `;
          productsSummary.appendChild(row);
        });
      }
      
      const deliveryLocation = document.getElementById('delivery-location')?.value;
      const deliveryCharge = deliveryCharges[deliveryLocation] || 0;
      
      if (document.getElementById('delivery-value')) {
        document.getElementById('delivery-value').textContent = `${deliveryCharge} Tk`;
      }
      
      if (document.getElementById('total-value')) {
        document.getElementById('total-value').textContent = `${subtotal + deliveryCharge} Tk`;
      }
      
      // Update proceed to checkout button visibility
      const checkoutBtn = document.querySelector('.checkout-btn');
      if (checkoutBtn) {
        if (cart.length === 0) {
          checkoutBtn.disabled = true;
          checkoutBtn.style.opacity = "0.5";
          checkoutBtn.style.cursor = "not-allowed";
        } else {
          checkoutBtn.disabled = false;
          checkoutBtn.style.opacity = "1";
          checkoutBtn.style.cursor = "pointer";
        }
      }
    }
    
    
    
    
    
    
    
    // Update quantity
    function updateQuantity(productNum, change) {
      // Get the quantity display element for the specific product
      const quantityDisplay = document.getElementById(`quantity${productNum}`);
      
      // Parse the current quantity as an integer
      let currentQuantity = parseInt(quantityDisplay.textContent);
      
      // Calculate the new quantity with a limit between 1 and 5
      // Math.max ensures the quantity doesn't go below 1
      // Math.min ensures the quantity doesn't go above 5
      const newQuantity = Math.min(5, Math.max(1, currentQuantity + change));
      
      // Update the quantity display
      quantityDisplay.textContent = newQuantity;
      
      // Update the quantity in the selectedProducts object
      selectedProducts[`product${productNum}`].quantity = newQuantity;
      
      // Recalculate the order summary
      updateOrderSummary();
    }
    
    
    
    
    
    // Handle color selection
    // 12 Apr update to handle colour selection and multiple image
    // 1: For color selection with image update:
    //<div onclick="selectColor('product1', 'Black and white Flower', this)">
    // 2: For image preview only:
    //<div onclick="selectColor('product1', null, this, true)">
    // _-_
    //If preview image should be different
    //Include:    data-preview-image="https:"
    // Other wise don't need to include data-preview-image
    function selectColor(productId, color, element, isImageOnly = false) {
      if (element) {
        // Get background image URL from style
        const bgImage = element.style.backgroundImage.replace(/url\(['"](.+)['"]\)/, '$1');
        element.setAttribute('data-circle-image', bgImage);
        
        
        
        // Update product image - use preview image if specified, otherwise use background image
        const productImage = document.getElementById(`image-${productId}`);
        if (productImage) {
          const previewImage = element.getAttribute('data-preview-image') || bgImage;
          productImage.src = previewImage;
        }
        
        if (!isImageOnly) {
          const colorOptions = element.parentElement.getElementsByClassName('color-option');
          Array.from(colorOptions).forEach(option => option.classList.remove('selected'));
          element.classList.add('selected');
          
          if (selectedProducts && selectedProducts[productId]) {
            selectedProducts[productId].color = color;
            updateOrderSummary();
          }
        }
      }
    }
    
    
    
    
    
    // Handle size selection
    function selectSize(productId, size) {
      const product = document.getElementById(productId);
      const sizeOptions = product.querySelectorAll('.size-option');
      
      sizeOptions.forEach(option => {
        option.classList.remove('selected');
        if (option.getAttribute('data-size') === size) {
          option.classList.add('selected');
        }
      });
    }
    
    
    
    
    
    // Handle form submission
    // Handle form submission
    document.addEventListener('DOMContentLoaded', function() {
      const orderForm = document.getElementById('order-form');
      const checkoutValidationError = document.getElementById('checkout-validation-error'); // Get reference to the new element
      
      if (orderForm && checkoutValidationError) { // Check if both exist
        orderForm.addEventListener('submit', function(e) {
          e.preventDefault(); // Prevent default submission immediately
          
          // Validate cart
          if (cart.length === 0) {
            checkoutValidationError.style.display = 'block'; // Show the specific message
            // Optional: Scroll to the message so the user sees it
            checkoutValidationError.scrollIntoView({ behavior: 'smooth', block: 'center' });
            return false; // Stop the submission process
          } else {
            // If cart is NOT empty, ensure the message is hidden
            checkoutValidationError.style.display = 'none';
          }
          
          // If validation passed, proceed with creating FormData and submitting
          const formData = new FormData(this);
          
          // Create formatted product summary for Google Forms
          let productSummary = '';
          cart.forEach((item, index) => {
            const productConfig = productConfigs[item.productId];
            productSummary += `Item ${index + 1}: ${productConfig.name},  Quantity = ${item.quantity},  Color = ${item.color},  Size = ${item.size}\n`;
          });
          
          // Calculate total from summary for accuracy
          let calculatedSubtotal = 0;
          cart.forEach(item => calculatedSubtotal += item.price * item.quantity);
          const deliveryLocation = document.getElementById('delivery-location')?.value;
          const deliveryCharge = deliveryCharges[deliveryLocation] || 0;
          const calculatedTotal = calculatedSubtotal + deliveryCharge;
          
          
          // Add product summary and total to form data
          formData.append('entry.764895570', productSummary.trim()); // Product Details
          // formData.append('entry.18022865', document.getElementById('total-value').textContent); // Total from display (less reliable)
          formData.append('entry.18022865', `${calculatedTotal} Tk`); // Calculated Total (more reliable)
          
          
          // --- Google Sheet Submission ---
          fetch('https://docs.google.com/forms/d/e/1FAIpQLSda7l1jjcN2i6lNFO8t7diVPZli9PqXTJ2YuhOv3zNlD6RZbg/formResponse', {
              method: 'POST',
              body: formData,
              mode: 'no-cors' // Important for Google Forms
            })
            .then(() => {
              console.log('Form submitted (no-cors). Opening thank you page.');
              // Optionally clear cart after successful submission attempt
              // cart = [];
              // updateCartDisplay();
              // updateFloatingCart();
              window.open('https://sites.google.com/view/order-with-side-cart/home', '_blank'); // Open thank you page
            })
            .catch(error => {
              console.error('Error submitting form (or fetch failed in no-cors mode):', error);
              // Still attempt to open thank you page even on error
              window.open('https://sites.google.com/view/order-with-side-cart/home', '_blank');
            });
        });
      } else {
        if (!orderForm) console.error("Order form not found");
        if (!checkoutValidationError) console.error("Checkout validation error element not found");
      }
    });
    
    
    
    
    // Function to bridge the old product selection system with the new cart
    function setupProductIntegration() {
      // Set up color option click handlers and data attributes
      document.querySelectorAll('.color-option').forEach(colorOption => {
        const productId = colorOption.closest('.product-container').id;
        const colorName = colorOption.getAttribute('data-color');
        
        // Make sure data-color is set
        if (!colorName && colorOption.textContent.trim()) {
          colorOption.setAttribute('data-color', colorOption.textContent.trim());
        }
        
        // Set data-preview-image from the product config if available
        const productConfig = productConfigs[productId];
        if (productConfig) {
          const colorInfo = productConfig.colors.find(c => c.name === colorOption.getAttribute('data-color'));
          if (colorInfo && colorInfo.previewImage) {
            colorOption.setAttribute('data-preview-image', colorInfo.previewImage);
          }
        }
        
        // Remove old event listeners to prevent duplicates
        colorOption.replaceWith(colorOption.cloneNode(true));
      });
      
      // Re-add event listeners after cloning
      document.querySelectorAll('.color-option').forEach(colorOption => {
        const productId = colorOption.closest('.product-container').id;
        colorOption.addEventListener('click', function() {
          // Call both color selection functions
          selectColor(this, productId);
          
          // Also call the original function if it exists
          if (typeof window.selectColor === 'function') {
            window.selectColor(productId, this.getAttribute('data-color'), this);
          }
        });
      });
      
      // Set up size option click handlers and data attributes
      document.querySelectorAll('.size-option').forEach(sizeOption => {
        const productId = sizeOption.closest('.product-container').id;
        const sizeValue = sizeOption.getAttribute('data-size');
        
        // Make sure data-size is set
        if (!sizeValue && sizeOption.textContent.trim()) {
          sizeOption.setAttribute('data-size', sizeOption.textContent.trim());
        }
        
        // Remove old event listeners to prevent duplicates
        sizeOption.replaceWith(sizeOption.cloneNode(true));
      });
      
      // Re-add event listeners after cloning
      document.querySelectorAll('.size-option').forEach(sizeOption => {
        const productId = sizeOption.closest('.product-container').id;
        sizeOption.addEventListener('click', function() {
          // Call both size selection functions
          selectSize(this, productId);
          
          // Also call the original function if it exists
          if (typeof window.selectSize === 'function') {
            window.selectSize(productId, this.getAttribute('data-size'), this);
          }
          
          // Remove any size warning message when a size is selected
          const sizeWarning = this.closest('.product-container').querySelector('.size-warning');
          if (sizeWarning) {
            sizeWarning.remove();
          }
        });
      });
      
      // Set up quantity buttons to work with both systems
      document.querySelectorAll('.quantity-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productNum = this.getAttribute('data-product');
          const change = parseInt(this.getAttribute('data-change'));
          
          // Call the original quantity update function
          if (typeof window.updateQuantity === 'function') {
            window.updateQuantity(productNum, change);
          }
        });
      });
    }
    
    
    
    
    // Update initializeApp to call our integration setup
    function initializeApp() {
      // Generate products HTML first
      generateProductsHTML();
      
      // Initialize cart
      initializeCart();
      
      // Setup floating cart button
      initializeFloatingCart();
      
      // Remove any existing product buttons
      document.querySelectorAll('.product-buttons').forEach(el => el.remove());
      
      // Add "Add to Cart" and "Buy Now" buttons to each product
      document.querySelectorAll('.product-container').forEach(container => {
        const productId = container.id;
        const buttonContainer = document.createElement('div');
        
        buttonContainer.className = 'product-buttons';
        buttonContainer.innerHTML = `
          <div class="buttons-row">
            <button type="button" class="add-to-cart-btn" onclick="addToCart('${productId}')">
              Add to Cart
            </button>
            <button type="button" class="buy-now-btn" onclick="buyNow('${productId}')">
              Buy Now
            </button>
          </div>
        `;
        
        // Check if buttons already exist to avoid duplicates
        if (!container.querySelector('.product-buttons')) {
          container.querySelector('.product-details').appendChild(buttonContainer);
        }
      });
      
      // Add back button on checkout page
      const checkoutPage = document.getElementById('checkout-page');
      // Remove existing navigation buttons to avoid duplicates
      checkoutPage.querySelectorAll('.navigation-btn').forEach(btn => btn.remove());
      
      const backToProductsBtn = document.createElement('button');
      backToProductsBtn.type = 'button';
      backToProductsBtn.className = 'navigation-btn back-btn';
      backToProductsBtn.textContent = '← Go Back';
      backToProductsBtn.addEventListener('click', () => navigateToPage('products-page'));
      checkoutPage.insertBefore(backToProductsBtn, checkoutPage.firstChild);
      
      // Add "Proceed to Checkout" button on product page
      const productsPage = document.getElementById('products-page');
      // Remove existing navigation buttons to avoid duplicates
      productsPage.querySelectorAll('.navigation-buttons').forEach(btn => btn.remove());
      
      const checkoutButtonContainer = document.createElement('div');
      checkoutButtonContainer.className = 'navigation-buttons';
      checkoutButtonContainer.innerHTML = `
      <button type="button" class="navigation-btn checkout-btn">
        Proceed to Checkout  🛒
      </button>
    `;
      productsPage.appendChild(checkoutButtonContainer);
      
      // Add event listener to the checkout button
      const checkoutBtn = checkoutButtonContainer.querySelector('.checkout-btn');
      checkoutBtn.addEventListener('click', () => navigateToPage('checkout-page'));
      
      // Add CSS for navigation buttons
      const navStyles = document.createElement('style');
      navStyles.id = 'navigation-styles';
      
      
      document.head.appendChild(navStyles);
      
      // Run our integration setup
      setupProductIntegration();
      
      // Set initial page based on URL hash or default to products page
      handleHashNavigation();
      
      // Listen for hash changes to handle navigation
      window.addEventListener('hashchange', handleHashNavigation);
    }
    
    
    
    
    
    
    
    // Update to the addToCart function to handle both systems
    // Update to the addToCart function to handle both systems
    function addToCart(productId) {
      const product = document.getElementById(productId);
      
      // Get the selected color element
      const selectedColorElement = product.querySelector('.color-option.selected');
      let selectedColor = "";
      
      // Only get color if the element is not marked as preview-only
      if (selectedColorElement && !selectedColorElement.hasAttribute('data-preview-only')) {
        selectedColor = selectedColorElement.getAttribute('data-color');
      }
      
      // Get the selected size element
      const selectedSizeElement = product.querySelector('.size-option.selected');
      
      // Check if size message already exists, remove it if it does
      const existingSizeMsg = product.querySelector('.size-warning');
      if (existingSizeMsg) {
        existingSizeMsg.remove();
      }
      
      // Handle the case when size is not selected
      if (!selectedSizeElement) {
        const sizeWarning = document.createElement('div');
        sizeWarning.className = 'size-warning';
        sizeWarning.textContent = 'Please select a size';
        sizeWarning.style.color = 'blue';
        sizeWarning.style.marginTop = '5px';
        sizeWarning.style.fontWeight = 'regular';
        
        const buttonContainer = product.querySelector('.product-buttons');
        buttonContainer.parentNode.insertBefore(sizeWarning, buttonContainer);
        return;
      }
      
      const selectedSize = selectedSizeElement.getAttribute('data-size');
      
      // Get the quantity
      const productNum = productId.replace('product', '');
      const quantityElement = document.getElementById(`quantity${productNum}`);
      const quantity = parseInt(quantityElement.textContent);
      
      // Get the current displayed image
      let productImage = product.querySelector('.product-image img').src;
      
      // Create new cart item
      const cartItem = {
        productId: productId,
        quantity: quantity,
        color: selectedColor, // This will be empty for preview-only products
        size: selectedSize,
        price: productConfigs[productId].basePrice,
        itemId: generateItemId(),
        baseImage: productImage
      };
      
      // Add to cart
      cart.push(cartItem);
      
      // Reset the quantity display to 1
      quantityElement.textContent = '1';
      
      // Update the cart display
      updateCartDisplay();
      
      // Show simplified notification message
      showCartNotification(`${productConfigs[productId].name} Added`);
      
      // Update floating cart button
      updateFloatingCart();
    }
    
    
    
    // Add an enhanced initialization function to document load
    document.addEventListener('DOMContentLoaded', function() {
      // Run original init
      initializeCart();
      
      // Add CSS for the new buttons
      const style = document.createElement('style');
      document.head.appendChild(style);
      
      // Initialize the app with proper page setup
      initializeApp();
      
      // Add a small delay to ensure everything is properly set up
      setTimeout(setupProductIntegration, 500);
    });
  </script>
  
  <script>
    // Whatsapp Button
    //functions to handle the close buttons
    function hideWhatsappButton(event) {
      event.stopPropagation();
      document.getElementById('whatsappButton').style.display = 'none';
    }
    
    // Whatsapp message animations handle
    window.addEventListener("load", function() {
      const messageBox = document.getElementById("messageBox");
      const whatsappButton = document.getElementById("whatsappButton");
      
      setTimeout(function() {
        if (whatsappButton) {
          whatsappButton.classList.add('whatsapp-bounce');
        }
      }, 1000);
      
      setTimeout(function() {
        if (messageBox) {
          messageBox.style.opacity = "1";
          messageBox.style.transform = "scale(1) translateX(0)";
          
          setTimeout(function() {
            messageBox.style.opacity = "0";
            messageBox.style.transform = "scale(0.9) translateX(20px)";
          }, 3000);
        }
      }, 2000);
    });
    document.getElementById("whatsappButton").addEventListener("animationend", function() {
      this.classList.remove('whatsapp-bounce');
    });
    // Whatsapp Button
  </script>
  
  <script>
    // Product Slide Panel functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Get panel elements
      const panel = document.getElementById('productSlidePanel');
      const overlay = document.querySelector('.panel-overlay');
      const closeBtn = panel.querySelector('.close-panel');
      const panelImg = document.getElementById('panelImage');
      const prevBtn = panel.querySelector('.prev-panel-image');
      const nextBtn = panel.querySelector('.next-panel-image');
      const panelProductName = document.getElementById('panelProductName');
      const panelOriginalPrice = document.getElementById('panelOriginalPrice');
      const panelDiscountedPrice = document.getElementById('panelDiscountedPrice');
      const panelColorOptions = document.getElementById('panelColorOptions');
      const panelSizeOptions = document.getElementById('panelSizeOptions');
      const panelDescription = document.getElementById('panelDescription');
      
      // Track current product and images
      let currentProductId = '';
      let currentProductImages = [];
      let currentImageIndex = 0;
      let panelQuantityValue = 1;
      
      
      
      // Function to collect all product images
      // --- Replace the entire function ---
      function getProductImages(productId) {
        const productContainer = document.getElementById(productId);
        if (!productContainer) return []; // Safety check
        
        const mainImageElement = productContainer.querySelector('.product-image img');
        const mainImageSrc = mainImageElement ? mainImageElement.src : null;
        
        const colorOptions = productContainer.querySelectorAll('.color-option');
        const images = [];
        
        if (mainImageSrc) {
          images.push(mainImageSrc); // Start with main image if it exists
        }
        
        colorOptions.forEach(option => {
          // Check if this is a preview-only option
          const isPreviewOnly = option.getAttribute('onclick').includes(', true)');
          
          // Try to extract background-image URL
          const bgImageMatch = option.style.backgroundImage.match(/url\(['"]?(.+?)['"]?\)/);
          const bgImage = bgImageMatch ? bgImageMatch[1] : null;
          
          if (isPreviewOnly) {
            // For preview-only, use background image directly
            if (bgImage && !images.includes(bgImage)) {
              images.push(bgImage);
            }
          } else {
            // For color selection, use data-preview-image if available
            const previewImage = option.getAttribute('data-preview-image') || bgImage;
            if (previewImage && !images.includes(previewImage)) {
              images.push(previewImage);
            }
          }
        });
        
        console.log(`Images collected for ${productId}:`, images.length, images);
        
        return images;
      }
      // --- End of replaced function ---
      
      // Function to update the panel with the current image
      function updatePanelImage() {
        panelImg.src = currentProductImages[currentImageIndex];
      }
      
      
      // Function to populate color options
      // Function to populate color options
      function populateColorOptions(productId) {
        const panelColorOptions = document.querySelector('.panel-color-options');
        
        // Clear existing options
        panelColorOptions.innerHTML = '';
        
        // Get color options from the main page
        const colorOptions = document.querySelectorAll(`#${productId} .color-option`);
        
        // Check if this is a preview-only product
        const firstColorOption = colorOptions[0];
        const isPreviewOnly = firstColorOption &&
          firstColorOption.getAttribute('onclick').includes(', true)');
        
        if (colorOptions.length === 0) {
          panelColorOptions.closest('.panel-options-section').style.display = 'none';
          return;
        } else {
          panelColorOptions.closest('.panel-options-section').style.display = 'block';
        }
        
        colorOptions.forEach(option => {
          const colorCircle = document.createElement('div');
          colorCircle.classList.add('panel-color-option');
          
          // Copy attributes from the original color option
          const color = option.getAttribute('data-color');
          const circleImage = option.getAttribute('data-circle-image') ||
            option.style.backgroundImage.replace(/url\(['"](.+)['"]\)/, '$1');
          const previewImage = option.getAttribute('data-preview-image') || circleImage;
          
          colorCircle.setAttribute('data-color', color);
          colorCircle.setAttribute('data-preview-image', previewImage);
          colorCircle.style.backgroundImage = `url('${circleImage}')`;
          
          if (!isPreviewOnly && option.classList.contains('selected')) {
            colorCircle.classList.add('selected');
          }
          
          // Add click event
          colorCircle.addEventListener('click', function() {
            if (isPreviewOnly) {
              // For preview-only products, just update the image
              selectColor(productId, null, this, true);
              document.getElementById('panelImage').src = previewImage;
            } else {
              // For regular products, handle selection and update image
              panelColorOptions.querySelectorAll('.panel-color-option').forEach(opt => {
                opt.classList.remove('selected');
              });
              this.classList.add('selected');
              selectColor(productId, color, this);
              document.getElementById('panelImage').src = previewImage;
            }
          });
          
          panelColorOptions.appendChild(colorCircle);
        });
      }
      
      
      
      // Function to populate size options
      // Function to populate size options
function populateSizeOptions(productId) {
  const panelSizeOptions = document.getElementById('panelSizeOptions');
  // Clear existing options
  panelSizeOptions.innerHTML = '';
  
  // Handle unavailable- prefix just like in openProductPanel
  let originalProductId = productId;
  if (originalProductId.startsWith('unavailable-')) {
    originalProductId = originalProductId.replace('unavailable-', '');
  }
  
  // Get product config using the original ID
  const config = productConfigs[originalProductId];
  if (!config) {
    console.error(`Product config not found for ${originalProductId}`);
    return; // Safety check
  }
  
  // Define all possible sizes
  const allPossibleSizes = ["M", "L", "XL", "2XL"];
  
  // Get the product's available sizes
  const productSizes = config.sizes || [];
  
  // Check if product is available (has price)
  const isPriceAvailable = config.basePrice !== null && config.basePrice !== undefined;
  
  // Create options for all sizes, marking unavailable ones
  allPossibleSizes.forEach(size => {
    const sizeBtn = document.createElement('div');
    sizeBtn.classList.add('panel-size-option');
    
    // Set size attribute
    sizeBtn.setAttribute('data-size', size);
    sizeBtn.textContent = size;
    
    // Check if size is available for this product
    const isAvailable = productSizes.includes(size);
    
    // Find if this size is selected on the main page
    const mainProductContainer = document.getElementById(productId); // Use the original ID with potential 'unavailable-' prefix
    if (mainProductContainer) {
      const mainSizeOption = mainProductContainer.querySelector(`.size-option[data-size="${size}"]`);
      if (mainSizeOption && mainSizeOption.classList.contains('selected')) {
        sizeBtn.classList.add('selected');
      }
    }
    
    // Mark unavailable sizes or sizes for unavailable products
    if (!isAvailable || !isPriceAvailable) {
      sizeBtn.classList.add('unavailable');
      // Add cross mark for unavailable size
      const sizeCross = document.createElement('span');
      sizeCross.className = 'size-cross';
      sizeCross.textContent = '✕';
      sizeBtn.appendChild(sizeCross);
    } else {
      // Add click event only for available sizes on available products
      sizeBtn.addEventListener('click', function() {
        // --- Panel Visual Update ---
        // Remove selected class from all panel options
        panelSizeOptions.querySelectorAll('.panel-size-option').forEach(opt => {
          opt.classList.remove('selected');
        });
        // Add selected class to clicked panel option
        this.classList.add('selected');
        
        // --- Main Page Update ---
        // Call the main selectSize function with the correct arguments
        // Use originalProductId for the config lookup
        selectSize(originalProductId, size);
      });
    }
    
    panelSizeOptions.appendChild(sizeBtn);
  });
  

}      
      
      
        
// Modify the beginning of your openProductPanel function
window.openProductPanel = function(productId) {
    // ---- START FIX ----
    let originalProductId = productId;
    if (originalProductId.startsWith('unavailable-')) {
      originalProductId = originalProductId.replace('unavailable-', '');
    }
    // Use originalProductId for config lookups, keep productId for element lookups if needed
    currentProductId = originalProductId; // Store the *original* ID for config lookups
    const config = productConfigs[currentProductId]; // Use the corrected ID here
    // ---- END FIX ----
    
    // Get product info
    const productContainer = document.getElementById(productId); // Use the potentially modified ID to find the element
    
    // Check if product is unavailable (using the same method as in the main page)
    // A product is unavailable if it doesn't have valid price data
    // const config = productConfigs[productId]; // REMOVED - already fetched above
    const isPriceAvailable = config && config.basePrice !== null && config.basePrice !== undefined;
    
    // Get the Add to Cart button in the panel
    const panelAddToCartBtn = document.getElementById('panelAddToCart');
    
    // Disable button if product is unavailable
    if (!isPriceAvailable) {
      // Disable the button
      panelAddToCartBtn.disabled = true;
      panelAddToCartBtn.style.opacity = '0.5';
      panelAddToCartBtn.style.pointerEvents = 'none';
      
      // Add an unavailable message below the button
      const warningText = document.createElement('div');
      warningText.textContent = '';
      warningText.style.color = 'red';
      warningText.style.textAlign = 'center';
      warningText.style.marginTop = '5px';
      warningText.id = 'panel-unavailable-warning';
      
      // Add the warning after the button
      panelAddToCartBtn.parentElement.appendChild(warningText);
    } else {
      // Enable the button (in case it was disabled before)
      panelAddToCartBtn.disabled = false;
      panelAddToCartBtn.style.opacity = '1';
      panelAddToCartBtn.style.pointerEvents = 'auto';
      
      // Remove any existing warning
      const existingWarning = document.getElementById('panel-unavailable-warning');
      if (existingWarning) {
        existingWarning.remove();
      }
    }
        const productName = productContainer.querySelector('.product-name').textContent;
        
        
                const originalPriceElement = productContainer.querySelector('.original-price');
        const discountedPriceElement = productContainer.querySelector('.discounted-price');
        
        const originalPriceText = originalPriceElement ? originalPriceElement.textContent : ''; // Get text only if element exists, otherwise empty string
        const discountedPriceText = discountedPriceElement ? discountedPriceElement.textContent : 'SOLD OUT!!!'; // Fallback if somehow missing
        
        // Get panel elements for prices
        const panelOriginalPriceElement = document.getElementById('panelOriginalPrice');
        const panelDiscountedPriceElement = document.getElementById('panelDiscountedPrice');
        
        // Set product info in panel - Conditionally display original price
        panelProductName.textContent = productName;
        
        if (originalPriceText) {
          panelOriginalPriceElement.textContent = originalPriceText;
          panelOriginalPriceElement.style.display = 'inline'; // Or 'block' depending on layout
        } else {
          panelOriginalPriceElement.textContent = ''; // Clear previous value
          panelOriginalPriceElement.style.display = 'none'; // Hide if no original price
        }
        panelDiscountedPriceElement.textContent = discountedPriceText;
        // --- MODIFIED PRICE HANDLING END ---
        
        // Find where it says "Set description" in openProductPanel function
        // Get reference to the size chart image element
const sizeChartImg = document.querySelector('.panel-size-chart img');

// Check if this product exists in productConfigs and has a size chart
if (productConfigs[productId] && productConfigs[productId].sizeChart) {
  // Set the image source to the size chart from product configuration
  sizeChartImg.src = productConfigs[productId].sizeChart;
  // Make the size chart panel visible
  document.querySelector('.panel-size-chart').style.display = 'block';
} else {
  // If product doesn't exist or has no size chart, hide the panel
  document.querySelector('.panel-size-chart').style.display = 'none';
}
        
        // Set description
        panelDescription.innerHTML = productConfigs[currentProductId]?.description || 'Product description not available.';
        // Using optional chaining (?.) is safer in case a product config accidentally misses a description
        
        // Get current quantity
        const quantityDisplay = productContainer.querySelector('.quantity-display');
        if (quantityDisplay) {
          panelQuantityValue = parseInt(quantityDisplay.textContent);
          document.getElementById('panelQuantity').textContent = panelQuantityValue;
        } else {
          panelQuantityValue = 1;
          document.getElementById('panelQuantity').textContent = '1';
        }
        
        // Get all images for this product
        currentProductImages = getProductImages(productId);
        currentImageIndex = 0; // Start with the main image
        
        // Populate color and size options
        populateColorOptions(productId);
        populateSizeOptions(productId);
        
        // Show the current image
        updatePanelImage();
        
        // Add event handler for "Add to Cart" button
        // Add event handler for "Add to Cart" button
        document.getElementById('panelAddToCart').onclick = function() {
          // Get the current product ID from the panel's state
          const productId = currentProductId;
          
          // No longer require color selection
          const selectedColorElement = panelColorOptions.querySelector('.panel-color-option.selected');
          let selectedColor = "";
          if (selectedColorElement) {
            selectedColor = selectedColorElement.getAttribute('data-color');
          }
          
          // Validate size selection
          const selectedSizeElement = panelSizeOptions.querySelector('.panel-size-option.selected');
          if (!selectedSizeElement) {
            // Create and insert size warning message
            const sizeWarning = document.createElement('div');
            sizeWarning.className = 'size-warning';
            sizeWarning.textContent = 'Please select a size';
            sizeWarning.style.color = 'blue';
            sizeWarning.style.marginTop = '5px';
            sizeWarning.style.fontWeight = 'regular';
            
            // Insert the warning in the panel
            const warningContainer = document.querySelector('.panel-size-options');
            // Remove existing warning if any
            const existingWarning = panel.querySelector('.size-warning');
            if (existingWarning) {
              existingWarning.remove();
            }
            warningContainer.appendChild(sizeWarning);
            return;
          }
          
          const selectedSize = selectedSizeElement.getAttribute('data-size');
          
          // Get the quantity from the panel
          const quantityElement = document.getElementById('panelQuantity');
          const quantity = parseInt(quantityElement.textContent);
          
          // Update the main page quantity display
          const productNum = productId.replace('product', '');
          const mainQuantityElement = document.getElementById(`quantity${productNum}`);
          mainQuantityElement.textContent = quantity;
          
          // Get the base image
          let productImage = document.getElementById(`image-${productId}`).src;
          
          // Create cart item
          const cartItem = {
            productId: productId,
            quantity: quantity,
            color: selectedColor,
            size: selectedSize,
            price: productConfigs[productId].basePrice,
            itemId: generateItemId(),
            baseImage: productImage
          };
          
          // Add to cart
          cart.push(cartItem);
          
          // Update the cart display
          updateCartDisplay();
          
          // Show notification
          showCartNotification(`${productConfigs[productId].name} Added`);
          
          // Update floating cart
          updateFloatingCart();
          
          // Close the panel
          closePanel();
        };
        
        // Show panel and overlay
        panel.classList.add('active');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden'; // Prevent scrolling
        
        // Hide navigation if only one image
        if (currentProductImages.length <= 1) {
          prevBtn.style.display = 'none';
          nextBtn.style.display = 'none';
        } else {
          prevBtn.style.display = 'flex';
          nextBtn.style.display = 'flex';
        }
      }
      
      // Function to close panel
      function closePanel() {
        panel.classList.remove('active');
        overlay.classList.remove('active');
        document.body.style.overflow = 'auto'; // Re-enable scrolling
      }
      
      // Navigate to previous image
      prevBtn.addEventListener('click', function() {
        if (currentImageIndex > 0) {
          currentImageIndex--;
        } else {
          currentImageIndex = currentProductImages.length - 1; // Loop back to the end
        }
        updatePanelImage();
      });
      
      // Navigate to next image
      nextBtn.addEventListener('click', function() {
        if (currentImageIndex < currentProductImages.length - 1) {
          currentImageIndex++;
        } else {
          currentImageIndex = 0; // Loop back to the beginning
        }
        updatePanelImage();
      });
      
      // Get all product containers
      const productContainers = document.querySelectorAll('.product-container');
      
      // Add click event to each product image
      productContainers.forEach(function(container) {
        const productId = container.id;
        const productImage = container.querySelector('.product-image img');
        
        productImage.addEventListener('click', function(e) {
          e.preventDefault(); // Prevent default behavior (full-screen modal)
          window.openProductPanel(productId);
        });
      });
      
      // Close panel when clicking the close button
      closeBtn.addEventListener('click', closePanel);
      
      // Close panel when clicking the overlay
      overlay.addEventListener('click', closePanel);
      
      // Handle keyboard navigation
      document.addEventListener('keydown', function(event) {
        if (panel.classList.contains('active')) {
          if (event.key === 'ArrowLeft') {
            prevBtn.click();
          } else if (event.key === 'ArrowRight') {
            nextBtn.click();
          } else if (event.key === 'Escape') {
            closeBtn.click();
          }
        }
      });
      
      // Add eye overlays to all product images
      function addEyeOverlayToProducts() {
        const productImages = document.querySelectorAll('.product-image');
        
        productImages.forEach(container => {
          // Create eye overlay element
          const eyeOverlay = document.createElement('div');
          eyeOverlay.className = 'eye-overlay';
          eyeOverlay.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
          </svg>
        `;
          
          // Get the product ID from the closest parent product container
          const productContainer = container.closest('.product-container');
          const productId = productContainer ? productContainer.id : null;
          
          // Add click event to the eye overlay
          eyeOverlay.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            if (productId) {
              window.openProductPanel(productId);
            }
          });
          
          // Add the overlay to the container
          container.appendChild(eyeOverlay);
        });
      }
      
      // Call function to add eye overlays
      addEyeOverlayToProducts();
    });
    
    // Function to update quantity in the panel
    function updatePanelQuantity(change) {
      const quantityElement = document.getElementById('panelQuantity');
      let quantity = parseInt(quantityElement.textContent);
      
      quantity += change;
      // Make sure quantity doesn't go below 1
      if (quantity < 1) quantity = 1;
      
      quantityElement.textContent = quantity;
    }
    // Product Slide Panel functionality
  </script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Get references to key elements
      const panel = document.getElementById('productSlidePanel');
      
      // Modify the existing panel Add to Cart button handler
      document.getElementById('panelAddToCart').onclick = function() {
        // Get the current product ID from the panel's state
        const productId = currentProductId;
        
        // Check if this is a preview-only product
        const mainProductContainer = document.getElementById(productId);
        const firstColorOption = mainProductContainer.querySelector('.color-option');
        const isPreviewOnly = firstColorOption &&
          firstColorOption.getAttribute('onclick').includes(', true)');
        
        // Only validate color selection if it's not a preview-only product
        if (!isPreviewOnly) {
          const selectedColorElement = panelColorOptions.querySelector('.panel-color-option.selected');
          if (!selectedColorElement) {
            alert('Please select a color before adding to cart.');
            return;
          }
        }
        
        // Validate size selection
        const selectedSizeElement = panelSizeOptions.querySelector('.panel-size-option.selected');
        if (!selectedSizeElement) {
          alert('Please select a size before adding to cart.');
          return;
        }
        
        // Get selected size and color (if applicable)
        const selectedSize = selectedSizeElement.getAttribute('data-size');
        let selectedColor = null;
        if (!isPreviewOnly) {
          const selectedColorElement = panelColorOptions.querySelector('.panel-color-option.selected');
          selectedColor = selectedColorElement ? selectedColorElement.getAttribute('data-color') : null;
        }
        
        // Get the quantity from the panel
        const quantityElement = document.getElementById('panelQuantity');
        const quantity = parseInt(quantityElement.textContent);
        
        // Update the main page quantity display
        const productNum = productId.replace('product', '');
        const mainQuantityElement = document.getElementById(`quantity${productNum}`);
        mainQuantityElement.textContent = quantity;
        
        // Update the color and size selection on the main page
        const mainProductContainer = document.getElementById(productId);
        
        // Update color selection only if it's not a preview-only product
        if (!isPreviewOnly && selectedColor) {
          const mainColorOptions = mainProductContainer.querySelectorAll('.color-option');
          mainColorOptions.forEach(option => {
            option.classList.remove('selected');
            if (option.getAttribute('data-color') === selectedColor) {
              option.classList.add('selected');
            }
          });
        }
        
        // Update size selection
        const mainSizeOptions = mainProductContainer.querySelectorAll('.size-option');
        mainSizeOptions.forEach(option => {
          option.classList.remove('selected');
          if (option.getAttribute('data-size') === selectedSize) {
            option.classList.add('selected');
          }
        });
        
        // Call the main addToCart function
        addToCart(productId);
        
        // Close the panel
        closePanel();
      };
    });
    
    // Ensure these functions are added to match the existing panel script
    function updatePanelQuantity(change) {
      const quantityElement = document.getElementById('panelQuantity');
      let quantity = parseInt(quantityElement.textContent);
      
      quantity += change;
      // Make sure quantity doesn't go below 1
      if (quantity < 1) quantity = 1;
      
      quantityElement.textContent = quantity;
      
      // Update the quantity on the main product page
      if (currentProductId) {
        const productNum = currentProductId.replace('product', '');
        const mainQuantityElement = document.getElementById(`quantity${productNum}`);
        if (mainQuantityElement) {
          mainQuantityElement.textContent = quantity;
        }
      }
    }
  </script>
  
  <script>
    // Eye icons to all product images
    // Function to add eye icons to all product images
    function addViewDetailsIcons() {
      const productContainers = document.querySelectorAll('.product-container');
      
      productContainers.forEach(function(container) {
        const productId = container.id;
        const productImageContainer = container.querySelector('.product-image');
        
        // Create eye icon element
        const eyeIcon = document.createElement('div');
        eyeIcon.classList.add('view-details-icon');
        eyeIcon.setAttribute('title', 'View details');
        eyeIcon.setAttribute('aria-label', 'View product details');
        
        // Add click event to the eye icon
        eyeIcon.addEventListener('click', function(e) {
          e.stopPropagation(); // Prevent event from bubbling up
          openProductPanel(productId);
        });
        
        // Add the eye icon to the product image container
        productImageContainer.appendChild(eyeIcon);
      });
    }
    
    // Eye icons to all product images
  </script>

  </form>
</body>

<body>
  <!-- Product Slide Panel -->
  <div class="panel-overlay"></div>
  <div id="productSlidePanel" class="product-slide-panel">
    <div class="panel-header">
      <h2 class="panel-title">Product Details</h2>
      <button class="close-panel">×</button>
    </div>
    
    <!-- Product image section -->
    <div class="panel-image-container">
      <img id="panelImage" class="panel-image" src="" alt="Product Image">
      <button class="panel-nav prev-panel-image">❮</button>
      <button class="panel-nav next-panel-image">❯</button>
    </div>
    
    <!-- Thumbnails section removed -->
    
    <!-- Product details section -->
    <div class="panel-product-details">
      
      <!-- Color options -->
      <div class="panel-options-section">
        <div id="panelColorOptions" class="panel-color-options">
          <!-- Color options will be added dynamically -->
        </div>
      </div>
      
      <h3 id="panelProductName" class="panel-product-name"></h3>
      
      <div class="panel-product-price">
        <span id="panelOriginalPrice" class="panel-original-price"></span>
        <span id="panelDiscountedPrice" class="panel-discounted-price"></span>
      </div>
      
      
      
      <!-- Size options -->
      <div class="panel-options-section">
        <div class="panel-options-title">Size:</div>
        <div id="panelSizeOptions" class="panel-size-options">
          <!-- Size options will be added dynamically -->
        </div>
      </div>
      
      <!-- Add to cart section -->
      <div class="panel-actions">
        <div class="panel-quantity">
          <div class="panel-quantity-btn" onclick="updatePanelQuantity(-1)">−</div>
          <div id="panelQuantity" class="panel-quantity-display">1</div>
          <div class="panel-quantity-btn" onclick="updatePanelQuantity(1)">+</div>
          <div id="panelAddToCart" class="panel-add-to-cart">Add to Cart</div>
        </div>
      </div>
      
      
      
      <!-- Size chart -->
      <div class="panel-size-chart" style="display: none;">
        <img src="" alt="Size Chart">
        <!-- Size chart will be dynamically added here -->
      </div>
      
      <!-- Product description - could be loaded dynamically or hardcoded -->
      <div class="panel-description">
        <div class="description-title">Description:</div>
        <div id="panelDescription"></div>
        <!-- Product description will be added here -->
      </div>
    </div>
    
  </div>
</body>

</html>
